import{j as r,B as f}from"./index.Eoy0PIGW.js";import{y as c}from"./_astro-entry_react-toastify.BqZZ0Rhh.js";import{f as u,M as g,g as m}from"./sidebar-l.CRgB3qwZ.js";import{I as h}from"./iconBase.DK9oy1VT.js";import{L as b,S as x}from"./checkbox.AQu349VM.js";import{i as p}from"./context.DLP3Q2dm.js";const C=a=>{const o=/(-?\d+[.,]\d+)\s*,\s*(-?\d+[.,]\d+)/,i=/(\d+)°\s*(\d+)['′]?\s*(?:(\d+(?:\.\d+)?)["″]?\s*)?([NS])[,\s]+(\d+)°\s*(\d+)['′]?\s*(?:(\d+(?:\.\d+)?)["″]?\s*)?([EW])/i,d=/(\d+[.,]\d+)°\s*([NS])\s*,\s*(\d+[.,]\d+)°\s*([EW])/i,l=a.match(o);if(l)return{lat:parseFloat(l[1].replace(",",".")),lng:parseFloat(l[2].replace(",","."))};const s=a.match(i);if(s){let e=parseInt(s[1])+parseInt(s[2])/60+(parseFloat(s[3])||0)/3600,t=parseInt(s[5])+parseInt(s[6])/60+(parseFloat(s[7])||0)/3600;return s[4].toUpperCase()==="S"&&(e=-e),s[8].toUpperCase()==="W"&&(t=-t),{lat:e,lng:t}}const n=a.match(d);if(n){let e=parseFloat(n[1].replace(",",".")),t=parseFloat(n[3].replace(",","."));return n[2].toUpperCase()==="S"&&(e=-e),n[4].toUpperCase()==="W"&&(t=-t),{lat:e,lng:t}}return{lat:null,lng:null}},S=({latitude:a,longitude:o,onChange:i,latLabel:d="Latitude",lngLabel:l="Longitude",children:s,disabled:n})=>r.jsxs(r.Fragment,{children:[r.jsxs(u,{className:g,children:[r.jsx(b,{className:"leading-5",children:d}),r.jsx(h,{type:"number",value:Math.abs(a),min:0,max:90,onChange:e=>{isNaN(parseFloat(e.target.value))||i(parseFloat(e.target.value)*(a!==0?Math.sign(a):-1),null)},disabled:n}),r.jsx(f,{variant:"outline",onClick:()=>i(-a,null),children:a>0?"N":"S"})]}),r.jsxs(u,{className:g,children:[r.jsx(b,{className:"leading-5",children:l}),r.jsx(h,{type:"number",value:Math.abs(o),min:0,max:180,onChange:e=>{isNaN(parseFloat(e.target.value))||i(null,parseFloat(e.target.value)*(o!==0?Math.sign(o):-1))},disabled:n}),r.jsx(f,{variant:"outline",onClick:()=>i(null,-o),children:o>0?"E":"W"})]}),r.jsxs(u,{className:"flex gap-2",children:[r.jsx(m,{className:"bg-blue-600 p-2 rounded-md font-semibold font-poppins transition-colors duration-500 flex justify-center",onClick:()=>{if(!navigator||!navigator.geolocation)return alert("Geolocation not supported");p.set(!0),c.promise(new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{maximumAge:0,enableHighAccuracy:!0})}).then(e=>{i(e.coords.latitude,e.coords.longitude)}).finally(()=>{p.set(!1)}),{pending:"Fetching location",success:"Location fetched",error:"Could not fetch location"},{autoClose:500})},disabled:n,children:"Current"}),r.jsx(m,{className:"bg-blue-600 p-2 rounded-md font-semibold font-poppins transition-colors duration-500 flex justify-center",onClick:()=>{if(!navigator||!navigator.clipboard){c.error("Clipboard API not supported in your browser");return}c.promise(navigator.clipboard.writeText(`${Math.abs(a)}°${a>0?"N":"S"}, ${Math.abs(o)}°${o>0?"E":"W"}`),{pending:"Writing to clipboard...",success:"Coordinates copied!",error:"An error occurred while copying"},{autoClose:1e3})},disabled:n,children:"Copy"}),r.jsx(m,{className:"bg-blue-600 p-2 rounded-md font-semibold font-poppins transition-colors duration-500 flex justify-center",onClick:()=>{if(!navigator||!navigator.clipboard){c.error("Clipboard API not supported in your browser");return}p.set(!0),c.promise(navigator.clipboard.readText().then(e=>{const t=C(e);if(t.lat!==null&&t.lng!==null){i(t.lat,t.lng);return}throw new Error("Could not find coordinates in clipboard content")}).finally(()=>{p.set(!1)}),{pending:"Reading from clipboard",success:"Coordinates set from clipboard",error:"No valid coordinates found in clipboard"},{autoClose:1e3})},disabled:n,children:"Paste"})]}),s]}),I=({unit:a,onChange:o,disabled:i})=>r.jsx(x,{trigger:"Unit",options:{miles:"Miles",kilometers:"Kilometers",meters:"Meters"},disabled:i,value:a,onValueChange:o});export{S as L,I as U};
