import{O as qt,C as Ft,T as Wt,D as Yt,P as Vt,d as Xt,R as Zt,j as o,a as le,u as Z,B as he}from"./index.Eoy0PIGW.js";import{t as tt,f as nt,h as at,j as rt,k as ot,n as pe,o as it,a as je,r as Gt,u as st,q as ge,v as lt,m as Jt,c as ke,p as Me,w as Kt,l as ut,s as Qt}from"./context.CUNpjwKz.js";import{y as K}from"./_astro-entry_react-toastify.BqZZ0Rhh.js";import{L as en,C as se}from"./checkbox.AQu349VM.js";import{R as r,r as Y}from"./index.DUAV1Q2A.js";import{S as ct}from"./iconBase.DK9oy1VT.js";import{U as tn,L as nn}from"./UnitSelect.Dqcb_Yh3.js";import{e as an,f as rn,g as on}from"./sidebar-l.CRgB3qwZ.js";import"./clsx.B-dksMZM.js";import"./index.w2VhVQe9.js";function sn(e){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",n.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}const gt=r.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),be=()=>{const e=r.useContext(gt);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};sn(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function ln(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function un(){return Fe(/^Mac/)}function cn(){return Fe(/^iPhone/)}function dt(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function dn(){return Fe(/^iPad/)||un()&&navigator.maxTouchPoints>1}function wt(){return cn()||dn()}function Fe(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const fn=24,mn=typeof window<"u"?Y.useLayoutEffect:Y.useEffect;function ft(...e){return(...n)=>{for(let t of e)typeof t=="function"&&t(...n)}}const Ae=typeof document<"u"&&window.visualViewport;function mt(e){let n=window.getComputedStyle(e);return/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY)}function vt(e){for(mt(e)&&(e=e.parentElement);e&&!mt(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const hn=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Te=0,He;function pn(e={}){let{isDisabled:n}=e;mn(()=>{if(!n)return Te++,Te===1&&wt()&&(He=gn()),()=>{Te--,Te===0&&He?.()}},[n])}function gn(){let e,n=0,t=f=>{e=vt(f.target),!(e===document.documentElement&&e===document.body)&&(n=f.changedTouches[0].pageY)},i=f=>{if(!e||e===document.documentElement||e===document.body){f.preventDefault();return}let p=f.changedTouches[0].pageY,A=e.scrollTop,k=e.scrollHeight-e.clientHeight;k!==0&&((A<=0&&p>n||A>=k&&p<n)&&f.preventDefault(),n=p)},s=f=>{let p=f.target;Pe(p)&&p!==document.activeElement&&(f.preventDefault(),p.style.transform="translateY(-2000px)",p.focus(),requestAnimationFrame(()=>{p.style.transform=""}))},a=f=>{let p=f.target;Pe(p)&&(p.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{p.style.transform="",Ae&&(Ae.height<window.innerHeight?requestAnimationFrame(()=>{ht(p)}):Ae.addEventListener("resize",()=>ht(p),{once:!0}))}))},y=()=>{window.scrollTo(0,0)},w=window.pageXOffset,T=window.pageYOffset,E=ft(wn(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let b=ft(we(document,"touchstart",t,{passive:!1,capture:!0}),we(document,"touchmove",i,{passive:!1,capture:!0}),we(document,"touchend",s,{passive:!1,capture:!0}),we(document,"focus",a,!0),we(window,"scroll",y));return()=>{E(),b(),window.scrollTo(w,T)}}function wn(e,n,t){let i=e.style[n];return e.style[n]=t,()=>{e.style[n]=i}}function we(e,n,t,i){return e.addEventListener(n,t,i),()=>{e.removeEventListener(n,t,i)}}function ht(e){let n=document.scrollingElement||document.documentElement;for(;e&&e!==n;){let t=vt(e);if(t!==document.documentElement&&t!==document.body&&t!==e){let i=t.getBoundingClientRect().top,s=e.getBoundingClientRect().top,a=e.getBoundingClientRect().bottom;const y=t.getBoundingClientRect().bottom+fn;a>y&&(t.scrollTop+=s-i)}e=t.parentElement}}function Pe(e){return e instanceof HTMLInputElement&&!hn.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function vn(e,n){typeof e=="function"?e(n):e!=null&&(e.current=n)}function bn(...e){return n=>e.forEach(t=>vn(t,n))}function bt(...e){return Y.useCallback(bn(...e),e)}const yt=new WeakMap;function j(e,n,t=!1){if(!e||!(e instanceof HTMLElement))return;let i={};Object.entries(n).forEach(([s,a])=>{if(s.startsWith("--")){e.style.setProperty(s,a);return}i[s]=e.style[s],e.style[s]=a}),!t&&yt.set(e,i)}function yn(e,n){if(!e||!(e instanceof HTMLElement))return;let t=yt.get(e);t&&(e.style[n]=t[n])}const $=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Re(e,n){if(!e)return null;const t=window.getComputedStyle(e),i=t.transform||t.webkitTransform||t.mozTransform;let s=i.match(/^matrix3d\((.+)\)$/);return s?parseFloat(s[1].split(", ")[$(n)?13:12]):(s=i.match(/^matrix\((.+)\)$/),s?parseFloat(s[1].split(", ")[$(n)?5:4]):null)}function xn(e){return 8*(Math.log(e+1)-2)}function Le(e,n){if(!e)return()=>{};const t=e.style.cssText;return Object.assign(e.style,n),()=>{e.style.cssText=t}}function Sn(...e){return(...n)=>{for(const t of e)typeof t=="function"&&t(...n)}}const O={DURATION:.5,EASE:[.32,.72,0,1]},xt=.4,Tn=.25,Rn=100,St=8,De=16,_e=26,Ie="vaul-dragging";function Tt(e){const n=r.useRef(e);return r.useEffect(()=>{n.current=e}),r.useMemo(()=>(...t)=>n.current==null?void 0:n.current.call(n,...t),[])}function Dn({defaultProp:e,onChange:n}){const t=r.useState(e),[i]=t,s=r.useRef(i),a=Tt(n);return r.useEffect(()=>{s.current!==i&&(a(i),s.current=i)},[i,s,a]),t}function Rt({prop:e,defaultProp:n,onChange:t=()=>{}}){const[i,s]=Dn({defaultProp:n,onChange:t}),a=e!==void 0,y=a?e:i,w=Tt(t),T=r.useCallback(E=>{if(a){const f=typeof E=="function"?E(e):E;f!==e&&w(f)}else s(E)},[a,e,s,w]);return[y,T]}function En({activeSnapPointProp:e,setActiveSnapPointProp:n,snapPoints:t,drawerRef:i,overlayRef:s,fadeFromIndex:a,onSnapPointChange:y,direction:w="bottom",container:T,snapToSequentialPoint:E}){const[b,f]=Rt({prop:e,defaultProp:t?.[0],onChange:n}),[p,A]=r.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);r.useEffect(()=>{function d(){A({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const k=r.useMemo(()=>b===t?.[t.length-1]||null,[t,b]),v=r.useMemo(()=>{var d;return(d=t?.findIndex(R=>R===b))!=null?d:null},[t,b]),l=t&&t.length>0&&(a||a===0)&&!Number.isNaN(a)&&t[a]===b||!t,g=r.useMemo(()=>{const d=T?{width:T.getBoundingClientRect().width,height:T.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var R;return(R=t?.map(S=>{const P=typeof S=="string";let L=0;if(P&&(L=parseInt(S,10)),$(w)){const c=P?L:p?S*d.height:0;return p?w==="bottom"?d.height-c:-d.height+c:c}const q=P?L:p?S*d.width:0;return p?w==="right"?d.width-q:-d.width+q:q}))!=null?R:[]},[t,p,T]),H=r.useMemo(()=>v!==null?g?.[v]:null,[g,v]),M=r.useCallback(d=>{var R;const S=(R=g?.findIndex(P=>P===d))!=null?R:null;y(S),j(i.current,{transition:`transform ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,transform:$(w)?`translate3d(0, ${d}px, 0)`:`translate3d(${d}px, 0, 0)`}),g&&S!==g.length-1&&a!==void 0&&S!==a&&S<a?j(s.current,{transition:`opacity ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,opacity:"0"}):j(s.current,{transition:`opacity ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,opacity:"1"}),f(t?.[Math.max(S,0)])},[i.current,t,g,a,s,f]);r.useEffect(()=>{if(b||e){var d;const R=(d=t?.findIndex(S=>S===e||S===b))!=null?d:-1;g&&R!==-1&&typeof g[R]=="number"&&M(g[R])}},[b,e,t,g,M]);function m({draggedDistance:d,closeDrawer:R,velocity:S,dismissible:P}){if(a===void 0)return;const L=w==="bottom"||w==="right"?(H??0)-d:(H??0)+d,q=v===a-1,c=v===0,U=d>0;if(q&&j(s.current,{transition:`opacity ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`}),!E&&S>2&&!U){P?R():M(g[0]);return}if(!E&&S>2&&U&&g&&t){M(g[t.length-1]);return}const _=g?.reduce((I,J)=>typeof I!="number"||typeof J!="number"?I:Math.abs(J-L)<Math.abs(I-L)?J:I),F=$(w)?window.innerHeight:window.innerWidth;if(S>xt&&Math.abs(d)<F*.4){const I=U?1:-1;if(I>0&&k&&t){M(g[t.length-1]);return}if(c&&I<0&&P&&R(),v===null)return;M(g[v+I]);return}M(_)}function V({draggedDistance:d}){if(H===null)return;const R=w==="bottom"||w==="right"?H-d:H+d;(w==="bottom"||w==="right")&&R<g[g.length-1]||(w==="top"||w==="left")&&R>g[g.length-1]||j(i.current,{transform:$(w)?`translate3d(0, ${R}px, 0)`:`translate3d(${R}px, 0, 0)`})}function ne(d,R){if(!t||typeof v!="number"||!g||a===void 0)return null;const S=v===a-1;if(v>=a&&R)return 0;if(S&&!R)return 1;if(!l&&!S)return null;const L=S?v+1:v-1,q=S?g[L]-g[L-1]:g[L+1]-g[L],c=d/Math.abs(q);return S?1-c:c}return{isLastSnapPoint:k,activeSnapPoint:b,shouldFade:l,getPercentageDragged:ne,setActiveSnapPoint:f,activeSnapPointIndex:v,onRelease:m,onDrag:V,snapPointsOffset:g}}const Cn=()=>()=>{};function On(){const{direction:e,isOpen:n,shouldScaleBackground:t,setBackgroundColorOnScale:i,noBodyStyles:s}=be(),a=r.useRef(null),y=Y.useMemo(()=>document.body.style.backgroundColor,[]);function w(){return(window.innerWidth-_e)/window.innerWidth}r.useEffect(()=>{if(n&&t){a.current&&clearTimeout(a.current);const T=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!T)return;Sn(i&&!s?Le(document.body,{background:"black"}):Cn,Le(T,{transformOrigin:$(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${O.DURATION}s`,transitionTimingFunction:`cubic-bezier(${O.EASE.join(",")})`}));const E=Le(T,{borderRadius:`${St}px`,overflow:"hidden",...$(e)?{transform:`scale(${w()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${w()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{E(),a.current=window.setTimeout(()=>{y?document.body.style.background=y:document.body.style.removeProperty("background")},O.DURATION*1e3)}}},[n,t,y])}let ve=null;function Nn({isOpen:e,modal:n,nested:t,hasBeenOpened:i,preventScrollRestoration:s,noBodyStyles:a}){const[y,w]=r.useState(()=>typeof window<"u"?window.location.href:""),T=r.useRef(0),E=r.useCallback(()=>{if(dt()&&ve===null&&e&&!a){ve={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:p}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-T.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const A=p-window.innerHeight;A&&T.current>=p&&(document.body.style.top=`${-(T.current+A)}px`)}),300)}},[e]),b=r.useCallback(()=>{if(dt()&&ve!==null&&!a){const f=-parseInt(document.body.style.top,10),p=-parseInt(document.body.style.left,10);Object.assign(document.body.style,ve),window.requestAnimationFrame(()=>{if(s&&y!==window.location.href){w(window.location.href);return}window.scrollTo(p,f)}),ve=null}},[y]);return r.useEffect(()=>{function f(){T.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),r.useEffect(()=>{if(n)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||b()}},[n,b]),r.useEffect(()=>{t||!i||(e?(!window.matchMedia("(display-mode: standalone)").matches&&E(),n||window.setTimeout(()=>{b()},500)):b())},[e,i,y,n,t,E,b]),{restorePositionSetting:b}}function $n({open:e,onOpenChange:n,children:t,onDrag:i,onRelease:s,snapPoints:a,shouldScaleBackground:y=!1,setBackgroundColorOnScale:w=!0,closeThreshold:T=Tn,scrollLockTimeout:E=Rn,dismissible:b=!0,handleOnly:f=!1,fadeFromIndex:p=a&&a.length-1,activeSnapPoint:A,setActiveSnapPoint:k,fixed:v,modal:l=!0,onClose:g,nested:H,noBodyStyles:M=!1,direction:m="bottom",defaultOpen:V=!1,disablePreventScroll:ne=!0,snapToSequentialPoint:d=!1,preventScrollRestoration:R=!1,repositionInputs:S=!0,onAnimationEnd:P,container:L,autoFocus:q=!1}){var c,U;const[_=!1,F]=Rt({defaultProp:V,prop:e,onChange:u=>{n?.(u),!u&&!H&&Ht(),setTimeout(()=>{P?.(u)},O.DURATION*1e3),u&&!l&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),u||(document.body.style.pointerEvents="auto")}}),[I,J]=r.useState(!1),[Q,ue]=r.useState(!1),[Nt,We]=r.useState(!1),re=r.useRef(null),ye=r.useRef(null),Ee=r.useRef(null),Ce=r.useRef(null),ce=r.useRef(null),de=r.useRef(!1),Oe=r.useRef(null),Ne=r.useRef(0),oe=r.useRef(!1),Ye=r.useRef(!V),Ve=r.useRef(0),h=r.useRef(null),Xe=r.useRef(((c=h.current)==null?void 0:c.getBoundingClientRect().height)||0),Ze=r.useRef(((U=h.current)==null?void 0:U.getBoundingClientRect().width)||0),$e=r.useRef(0),$t=r.useCallback(u=>{a&&u===fe.length-1&&(ye.current=new Date)},[]),{activeSnapPoint:jt,activeSnapPointIndex:ie,setActiveSnapPoint:Ge,onRelease:kt,snapPointsOffset:fe,onDrag:Mt,shouldFade:Je,getPercentageDragged:At}=En({snapPoints:a,activeSnapPointProp:A,setActiveSnapPointProp:k,drawerRef:h,fadeFromIndex:p,overlayRef:re,onSnapPointChange:$t,direction:m,container:L,snapToSequentialPoint:d});pn({isDisabled:!_||Q||!l||Nt||!I||!S||!ne});const{restorePositionSetting:Ht}=Nn({isOpen:_,modal:l,nested:H??!1,hasBeenOpened:I,preventScrollRestoration:R,noBodyStyles:M});function xe(){return(window.innerWidth-_e)/window.innerWidth}function Lt(u){var D,C;!b&&!a||h.current&&!h.current.contains(u.target)||(Xe.current=((D=h.current)==null?void 0:D.getBoundingClientRect().height)||0,Ze.current=((C=h.current)==null?void 0:C.getBoundingClientRect().width)||0,ue(!0),Ee.current=new Date,wt()&&window.addEventListener("touchend",()=>de.current=!1,{once:!0}),u.target.setPointerCapture(u.pointerId),Ne.current=$(m)?u.pageY:u.pageX)}function Ke(u,D){var C;let x=u;const N=(C=window.getSelection())==null?void 0:C.toString(),z=h.current?Re(h.current,m):null,B=new Date;if(x.tagName==="SELECT"||x.hasAttribute("data-vaul-no-drag")||x.closest("[data-vaul-no-drag]"))return!1;if(m==="right"||m==="left")return!0;if(ye.current&&B.getTime()-ye.current.getTime()<500)return!1;if(z!==null&&(m==="bottom"?z>0:z<0))return!0;if(N&&N.length>0)return!1;if(ce.current&&B.getTime()-ce.current.getTime()<E&&z===0||D)return ce.current=B,!1;for(;x;){if(x.scrollHeight>x.clientHeight){if(x.scrollTop!==0)return ce.current=new Date,!1;if(x.getAttribute("role")==="dialog")return!0}x=x.parentNode}return!0}function It(u){if(h.current&&Q){const D=m==="bottom"||m==="right"?1:-1,C=(Ne.current-($(m)?u.pageY:u.pageX))*D,x=C>0,N=a&&!b&&!x;if(N&&ie===0)return;const z=Math.abs(C),B=document.querySelector("[data-vaul-drawer-wrapper]"),ee=m==="bottom"||m==="top"?Xe.current:Ze.current;let W=z/ee;const ae=At(z,x);if(ae!==null&&(W=ae),N&&W>=1||!de.current&&!Ke(u.target,x))return;if(h.current.classList.add(Ie),de.current=!0,j(h.current,{transition:"none"}),j(re.current,{transition:"none"}),a&&Mt({draggedDistance:C}),x&&!a){const X=xn(C),Se=Math.min(X*-1,0)*D;j(h.current,{transform:$(m)?`translate3d(0, ${Se}px, 0)`:`translate3d(${Se}px, 0, 0)`});return}const te=1-W;if((Je||p&&ie===p-1)&&(i?.(u,W),j(re.current,{opacity:`${te}`,transition:"none"},!0)),B&&re.current&&y){const X=Math.min(xe()+W*(1-xe()),1),Se=8-W*8,et=Math.max(0,14-W*14);j(B,{borderRadius:`${Se}px`,transform:$(m)?`scale(${X}) translate3d(0, ${et}px, 0)`:`scale(${X}) translate3d(${et}px, 0, 0)`,transition:"none"},!0)}if(!a){const X=z*D;j(h.current,{transform:$(m)?`translate3d(0, ${X}px, 0)`:`translate3d(${X}px, 0, 0)`})}}}r.useEffect(()=>{window.requestAnimationFrame(()=>{Ye.current=!0})},[]),r.useEffect(()=>{var u;function D(){if(!h.current||!S)return;const C=document.activeElement;if(Pe(C)||oe.current){var x;const N=((x=window.visualViewport)==null?void 0:x.height)||0,z=window.innerHeight;let B=z-N;const ee=h.current.getBoundingClientRect().height||0,W=ee>z*.8;$e.current||($e.current=ee);const ae=h.current.getBoundingClientRect().top;if(Math.abs(Ve.current-B)>60&&(oe.current=!oe.current),a&&a.length>0&&fe&&ie){const te=fe[ie]||0;B+=te}if(Ve.current=B,ee>N||oe.current){const te=h.current.getBoundingClientRect().height;let X=te;te>N&&(X=N-(W?ae:_e)),v?h.current.style.height=`${te-Math.max(B,0)}px`:h.current.style.height=`${Math.max(X,N-ae)}px`}else ln()||(h.current.style.height=`${$e.current}px`);a&&a.length>0&&!oe.current?h.current.style.bottom="0px":h.current.style.bottom=`${Math.max(B,0)}px`}}return(u=window.visualViewport)==null||u.addEventListener("resize",D),()=>{var C;return(C=window.visualViewport)==null?void 0:C.removeEventListener("resize",D)}},[ie,a,fe]);function me(u){Pt(),g?.(),u||F(!1),setTimeout(()=>{a&&Ge(a[0])},O.DURATION*1e3)}function Qe(){if(!h.current)return;const u=document.querySelector("[data-vaul-drawer-wrapper]"),D=Re(h.current,m);j(h.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`}),j(re.current,{transition:`opacity ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,opacity:"1"}),y&&D&&D>0&&_&&j(u,{borderRadius:`${St}px`,overflow:"hidden",...$(m)?{transform:`scale(${xe()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${xe()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${O.DURATION}s`,transitionTimingFunction:`cubic-bezier(${O.EASE.join(",")})`},!0)}function Pt(){!Q||!h.current||(h.current.classList.remove(Ie),de.current=!1,ue(!1),Ce.current=new Date)}function _t(u){if(!Q||!h.current)return;h.current.classList.remove(Ie),de.current=!1,ue(!1),Ce.current=new Date;const D=Re(h.current,m);if(!u||!Ke(u.target,!1)||!D||Number.isNaN(D)||Ee.current===null)return;const C=Ce.current.getTime()-Ee.current.getTime(),x=Ne.current-($(m)?u.pageY:u.pageX),N=Math.abs(x)/C;if(N>.05&&(We(!0),setTimeout(()=>{We(!1)},200)),a){kt({draggedDistance:x*(m==="bottom"||m==="right"?1:-1),closeDrawer:me,velocity:N,dismissible:b}),s?.(u,!0);return}if(m==="bottom"||m==="right"?x>0:x<0){Qe(),s?.(u,!0);return}if(N>xt){me(),s?.(u,!1);return}var z;const B=Math.min((z=h.current.getBoundingClientRect().height)!=null?z:0,window.innerHeight);var ee;const W=Math.min((ee=h.current.getBoundingClientRect().width)!=null?ee:0,window.innerWidth),ae=m==="left"||m==="right";if(Math.abs(D)>=(ae?W:B)*T){me(),s?.(u,!1);return}s?.(u,!0),Qe()}r.useEffect(()=>(_&&(j(document.documentElement,{scrollBehavior:"auto"}),ye.current=new Date),()=>{yn(document.documentElement,"scrollBehavior")}),[_]);function Bt(u){const D=u?(window.innerWidth-De)/window.innerWidth:1,C=u?-16:0;Oe.current&&window.clearTimeout(Oe.current),j(h.current,{transition:`transform ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,transform:$(m)?`scale(${D}) translate3d(0, ${C}px, 0)`:`scale(${D}) translate3d(${C}px, 0, 0)`}),!u&&h.current&&(Oe.current=setTimeout(()=>{const x=Re(h.current,m);j(h.current,{transition:"none",transform:$(m)?`translate3d(0, ${x}px, 0)`:`translate3d(${x}px, 0, 0)`})},500))}function zt(u,D){if(D<0)return;const C=(window.innerWidth-De)/window.innerWidth,x=C+D*(1-C),N=-16+D*De;j(h.current,{transform:$(m)?`scale(${x}) translate3d(0, ${N}px, 0)`:`scale(${x}) translate3d(${N}px, 0, 0)`,transition:"none"})}function Ut(u,D){const C=$(m)?window.innerHeight:window.innerWidth,x=D?(C-De)/C:1,N=D?-16:0;D&&j(h.current,{transition:`transform ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,transform:$(m)?`scale(${x}) translate3d(0, ${N}px, 0)`:`scale(${x}) translate3d(${N}px, 0, 0)`})}return r.useEffect(()=>{l||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[l]),r.createElement(Zt,{defaultOpen:V,onOpenChange:u=>{!b&&!u||(u?J(!0):me(!0),F(u))},open:_},r.createElement(gt.Provider,{value:{activeSnapPoint:jt,snapPoints:a,setActiveSnapPoint:Ge,drawerRef:h,overlayRef:re,onOpenChange:n,onPress:Lt,onRelease:_t,onDrag:It,dismissible:b,shouldAnimate:Ye,handleOnly:f,isOpen:_,isDragging:Q,shouldFade:Je,closeDrawer:me,onNestedDrag:zt,onNestedOpenChange:Bt,onNestedRelease:Ut,keyboardIsOpen:oe,modal:l,snapPointsOffset:fe,activeSnapPointIndex:ie,direction:m,shouldScaleBackground:y,setBackgroundColorOnScale:w,noBodyStyles:M,container:L,autoFocus:q}},t))}const Dt=r.forwardRef(function({...e},n){const{overlayRef:t,snapPoints:i,onRelease:s,shouldFade:a,isOpen:y,modal:w,shouldAnimate:T}=be(),E=bt(n,t),b=i&&i.length>0;if(!w)return null;const f=r.useCallback(p=>s(p),[s]);return r.createElement(qt,{onMouseUp:f,ref:E,"data-vaul-overlay":"","data-vaul-snap-points":y&&b?"true":"false","data-vaul-snap-points-overlay":y&&a?"true":"false","data-vaul-animate":T?.current?"true":"false",...e})});Dt.displayName="Drawer.Overlay";const Et=r.forwardRef(function({onPointerDownOutside:e,style:n,onOpenAutoFocus:t,...i},s){const{drawerRef:a,onPress:y,onRelease:w,onDrag:T,keyboardIsOpen:E,snapPointsOffset:b,activeSnapPointIndex:f,modal:p,isOpen:A,direction:k,snapPoints:v,container:l,handleOnly:g,shouldAnimate:H,autoFocus:M}=be(),[m,V]=r.useState(!1),ne=bt(s,a),d=r.useRef(null),R=r.useRef(null),S=r.useRef(!1),P=v&&v.length>0;On();const L=(c,U,_=0)=>{if(S.current)return!0;const F=Math.abs(c.y),I=Math.abs(c.x),J=I>F,Q=["bottom","right"].includes(U)?1:-1;if(U==="left"||U==="right"){if(!(c.x*Q<0)&&I>=0&&I<=_)return J}else if(!(c.y*Q<0)&&F>=0&&F<=_)return!J;return S.current=!0,!0};r.useEffect(()=>{P&&window.requestAnimationFrame(()=>{V(!0)})},[]);function q(c){d.current=null,S.current=!1,w(c)}return r.createElement(Ft,{"data-vaul-drawer-direction":k,"data-vaul-drawer":"","data-vaul-delayed-snap-points":m?"true":"false","data-vaul-snap-points":A&&P?"true":"false","data-vaul-custom-container":l?"true":"false","data-vaul-animate":H?.current?"true":"false",...i,ref:ne,style:b&&b.length>0?{"--snap-point-height":`${b[f??0]}px`,...n}:n,onPointerDown:c=>{g||(i.onPointerDown==null||i.onPointerDown.call(i,c),d.current={x:c.pageX,y:c.pageY},y(c))},onOpenAutoFocus:c=>{t?.(c),M||c.preventDefault()},onPointerDownOutside:c=>{if(e?.(c),!p||c.defaultPrevented){c.preventDefault();return}E.current&&(E.current=!1)},onFocusOutside:c=>{if(!p){c.preventDefault();return}},onPointerMove:c=>{if(R.current=c,g||(i.onPointerMove==null||i.onPointerMove.call(i,c),!d.current))return;const U=c.pageY-d.current.y,_=c.pageX-d.current.x,F=c.pointerType==="touch"?10:2;L({x:_,y:U},k,F)?T(c):(Math.abs(_)>F||Math.abs(U)>F)&&(d.current=null)},onPointerUp:c=>{i.onPointerUp==null||i.onPointerUp.call(i,c),d.current=null,S.current=!1,w(c)},onPointerOut:c=>{i.onPointerOut==null||i.onPointerOut.call(i,c),q(R.current)},onContextMenu:c=>{i.onContextMenu==null||i.onContextMenu.call(i,c),R.current&&q(R.current)}})});Et.displayName="Drawer.Content";const jn=250,kn=120,Mn=r.forwardRef(function({preventCycle:e=!1,children:n,...t},i){const{closeDrawer:s,isDragging:a,snapPoints:y,activeSnapPoint:w,setActiveSnapPoint:T,dismissible:E,handleOnly:b,isOpen:f,onPress:p,onDrag:A}=be(),k=r.useRef(null),v=r.useRef(!1);function l(){if(v.current){M();return}window.setTimeout(()=>{g()},kn)}function g(){if(a||e||v.current){M();return}if(M(),!y||y.length===0){E||s();return}if(w===y[y.length-1]&&E){s();return}const V=y.findIndex(d=>d===w);if(V===-1)return;const ne=y[V+1];T(ne)}function H(){k.current=window.setTimeout(()=>{v.current=!0},jn)}function M(){k.current&&window.clearTimeout(k.current),v.current=!1}return r.createElement("div",{onClick:l,onPointerCancel:M,onPointerDown:m=>{b&&p(m),H()},onPointerMove:m=>{b&&A(m)},ref:i,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...t},r.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},n))});Mn.displayName="Drawer.Handle";function An(e){const n=be(),{container:t=n.container,...i}=e;return r.createElement(Vt,{container:t,...i})}const G={Root:$n,Content:Et,Overlay:Dt,Trigger:Xt,Portal:An,Title:Wt,Description:Yt},Be=({shouldScaleBackground:e=!0,...n})=>o.jsx(G.Root,{shouldScaleBackground:e,...n});Be.displayName="Drawer";const pt=G.Trigger,Hn=G.Portal,Ct=Y.forwardRef(({className:e,...n},t)=>o.jsx(G.Overlay,{ref:t,className:le("fixed inset-0 z-[1040] bg-black/80",e),...n}));Ct.displayName=G.Overlay.displayName;const ze=Y.forwardRef(({className:e,children:n,...t},i)=>o.jsxs(Hn,{container:typeof document<"u"?document.querySelector("#map-modal-dialog-container-leaflet"):null,children:[o.jsx(Ct,{}),o.jsxs(G.Content,{ref:i,className:le("fixed inset-x-0 bottom-0 z-[1040] mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...t,children:[o.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),n]})]}));ze.displayName="DrawerContent";const Ue=({className:e,...n})=>o.jsx("div",{className:le("grid gap-1.5 p-4 text-center sm:text-left",e),...n});Ue.displayName="DrawerHeader";const qe=Y.forwardRef(({className:e,...n},t)=>o.jsx(G.Title,{ref:t,className:le("text-lg font-semibold leading-none tracking-tight",e),...n}));qe.displayName=G.Title.displayName;const Ot=Y.forwardRef(({className:e,...n},t)=>o.jsx(G.Description,{ref:t,className:le("text-sm text-muted-foreground",e),...n}));Ot.displayName=G.Description.displayName;const Ln="hz",Vn=({className:e})=>{Z(tt);const n=Z(nt),t=Z(at),i=Z(rt),s=Z(ot),a=Z(pe),y=Z(it),w=Z(je),T=Z(Gt),E=Z(st),[b,f]=Y.useState(!1),[p,A]=Y.useState(!1);Y.useEffect(()=>{const l=new URL(window.location.toString()).searchParams.get(Ln);if(l!==null)try{k(atob(l)),window.history.replaceState({},"",window.location.pathname)}catch(g){K.error(`Invalid hiding zone settings: ${g}`)}},[]);const k=v=>{try{const l=JSON.parse(v);l.properties&&l.properties.isHidingZone===!0?(ge.set(lt.parse(l.properties.questions??[])),Jt.set(l),ke.set(null),Me.set(null)):l.questions?(ge.set(lt.parse(l.questions)),delete l.questions,ke.set(l),Me.set(l)):(ge.set([]),ke.set(l),Me.set(l)),l.disabledStations!==null&&l.disabledStations.constructor===Array&&Kt.set(l.disabledStations),l.hidingRadius!==null&&it.set(l.hidingRadius),K.success("Hiding zone loaded successfully",{autoClose:2e3})}catch(l){K.error(`Invalid hiding zone settings: ${l}`)}};return o.jsxs("div",{className:le("flex justify-end gap-2 max-[412px]:!mb-4 max-[340px]:flex-col",e),children:[o.jsx(he,{className:"shadow-md",onClick:()=>{const v=btoa(JSON.stringify(T)),l=`${window.location.protocol}//${window.location.host}${window.location.pathname}?hz=${v}`;if(navigator.share)navigator.share({title:document.title,url:l}).catch(()=>K.error("Failed to share via OS. You may have disabled too many stations."));else{if(!navigator||!navigator.clipboard)return K.error(`Clipboard not supported. Try manually copying/pasting: ${l}`,{className:"p-0 w-[1000px]"});navigator.clipboard.writeText(l),K.success("Hiding zone URL copied to clipboard",{autoClose:2e3})}},children:"Share"}),o.jsxs(Be,{open:b,onOpenChange:f,children:[o.jsx(pt,{className:"w-24",asChild:!0,children:o.jsx(he,{className:"w-24 shadow-md",children:"Instructions"})}),o.jsx(ze,{children:o.jsxs("div",{className:"flex flex-col items-center gap-4 mb-1",children:[o.jsx(Ue,{children:o.jsx(qe,{className:"text-4xl font-semibold font-poppins",children:"Instructions"})}),o.jsxs("div",{className:"px-12 pb-2 max-w-[1000px] text-center overflow-y-scroll max-h-[40vh] font-oxygen",children:[o.jsx(Ot,{className:"mb-2",children:"Map Generator for Jet Lag The Game: Hide and Seek is intended for those who have purchased the Jet Lag Home Game. However, it is not affiliated with them in any way."}),o.jsxs("p",{className:"mb-3",children:["At the beginning of the game, all players should coordinate the bounds of the game (Japan for the original Hide and Seek). You can choose a location at the top of the map (e.g. city, county, state, country...) or draw it on the map (look at the bottom left of the map). This can be easily shared through the"," ",o.jsx("a",{onClick:()=>{A(!0),f(!1)},className:"text-blue-500 cursor-pointer",children:"options menu"})," ","at the bottom right of the screen. You may want to change the default unit from miles in that menu. You can also choose to highlight train lines on the map in that menu."]}),o.jsx("p",{className:"mb-3",children:"Hiders should enable “Hider Mode” in that menu. This will allow the hider to set their location and have all questions be automatically answered according to that location. Not only will this make filling the maps for hiders incredibly easy, but it will also prevent any conflicting information between the hider and the seekers."}),o.jsx("p",{className:"mb-3",children:"Whenever a question is asked, you should add it to the map immediately. This can be done most trivially by right clicking on the map in desktop or long pressing on the map in mobile. Choose the question from the dropdown and a marker will appear where you clicked. Move that to the location where you asked the question. Alternatively you could click the marker and click the “Current” button for the marker to be moved to your physical location. You can also add a question through the question sidebar (left side of the screen, open it on the top left). The sidebar will display all the questions in an organized manner instead of requiring a click on each marker to see each question."}),o.jsxs("p",{className:"mb-3",children:["Seekers can also enable hiding zone mode by clicking the thumbtack on the top-right of the map. This will display all possible hiding zones (circles with a ",y," mile radius around a train station) that the hider could be in on the map in green. Hiding zone mode must be enabled for questions that deal with hiding zones (i.e., station starts with same letter). All hiding zones will also be listed in the “Hiding Zone” sidebar, accessible from the top-right of the map."]}),o.jsxs("p",{className:"mb-3",children:["If you encounter any bugs or have any feature requests, please report them at the"," ",o.jsx("a",{href:"https://github.com/taibeled/JetLagHideAndSeek/issues",className:"text-blue-500 cursor-pointer",children:"GitHub repository"}),". If you appreciate this project, you can also leave a star there."]})]})]})})]}),o.jsxs(Be,{open:p,onOpenChange:A,children:[o.jsx(pt,{className:"w-24",asChild:!0,children:o.jsx(he,{className:"w-24 shadow-md",children:"Options"})}),o.jsx(ze,{children:o.jsxs("div",{className:"flex flex-col items-center gap-4 mb-4",children:[o.jsx(Ue,{children:o.jsx(qe,{className:"text-4xl font-semibold font-poppins",children:"Options"})}),o.jsxs("div",{className:"overflow-y-scroll max-h-[40vh] flex flex-col items-center gap-4 max-w-[1000px] px-12",children:[o.jsxs("div",{className:"flex flex-row max-[330px]:flex-col gap-4",children:[o.jsx(he,{onClick:()=>{if(!navigator||!navigator.clipboard)return K.error("Clipboard not supported");navigator.clipboard.writeText(JSON.stringify(T)),K.success("Hiding zone copied successfully",{autoClose:2e3})},children:"Copy Hiding Zone"}),o.jsx(he,{onClick:()=>{if(!navigator||!navigator.clipboard)return K.error("Clipboard not supported");navigator.clipboard.readText().then(k)},children:"Paste Hiding Zone"})]}),o.jsx(ct,{className:"bg-slate-300 w-[280px]"}),o.jsx(en,{children:"Default Unit"}),o.jsx(tn,{unit:n,onChange:nt.set}),o.jsx(ct,{className:"bg-slate-300 w-[280px]"}),o.jsxs("div",{className:"flex flex-row items-center gap-2",children:[o.jsx("label",{className:"text-2xl font-semibold font-poppins",children:"Animate map movements?"}),o.jsx(se,{checked:i,onCheckedChange:()=>{rt.set(!i)}})]}),o.jsxs("div",{className:"flex flex-row items-center gap-2",children:[o.jsx("label",{className:"text-2xl font-semibold font-poppins",children:"Highlight train lines?"}),o.jsx(se,{checked:t,onCheckedChange:()=>{at.set(!t)}})]}),o.jsxs("div",{className:"flex flex-row items-center gap-2",children:[o.jsx("label",{className:"text-2xl font-semibold font-poppins",children:"Enable planning mode?"}),o.jsx(se,{checked:E,onCheckedChange:()=>{if(E===!0){const v=ut.get();v&&v.eachLayer(l=>{(l.questionKey||l.questionKey===0)&&v.removeLayer(l)})}else ge.set([...ge.get()]);st.set(!E)}})]}),o.jsxs("div",{className:"flex flex-row items-center gap-2",children:[o.jsx("label",{className:"text-2xl font-semibold font-poppins",children:"Auto save?"}),o.jsx(se,{checked:w,onCheckedChange:()=>je.set(!w)})]}),o.jsxs("div",{className:"flex flex-row items-center gap-2",children:[o.jsx("label",{className:"text-2xl font-semibold font-poppins",children:"Auto zoom?"}),o.jsx(se,{checked:s,onCheckedChange:()=>ot.set(!s)})]}),o.jsxs("div",{className:"flex flex-row items-center gap-2",children:[o.jsx("label",{className:"text-2xl font-semibold font-poppins",children:"Hider mode?"}),o.jsx(se,{checked:!!a,onCheckedChange:()=>{if(a===!1){const v=ut.get();if(v){const l=v.getCenter();pe.set({latitude:l.lat,longitude:l.lng})}else pe.set({latitude:0,longitude:0})}else pe.set(!1)}})]}),a!==!1&&o.jsxs(an,{children:[o.jsx(nn,{latitude:a.latitude,longitude:a.longitude,onChange:(v,l)=>{a.latitude=v??a.latitude,a.longitude=l??a.longitude,w?pe.set({...a}):tt.set(Math.random())},latLabel:"Hider Latitude",lngLabel:"Hider Longitude"}),!je&&o.jsx(rn,{children:o.jsx(on,{className:"bg-blue-600 p-2 rounded-md font-semibold font-poppins transition-shadow duration-500 mt-2",onClick:Qt,children:"Save"})})]})]})]})})]})]})};export{Vn as OptionDrawers};
