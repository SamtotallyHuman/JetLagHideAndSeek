import{y as Ui,$ as Ue,a4 as vr,J as Xi,a0 as Dn,al as Pn,A as mr,U as wr,z as ge,a5 as xr,x as Ki,X as xe,a8 as Tn,am as Er,an as Sr,a2 as Vi,G as _r}from"./context.BZhA5a5S.js";function Zo(e,t,n,i={}){const r=Ui(e),s=Ue(r[0]),o=Ue(r[1]),l=Ue(n),c=vr(t,i.units),f=Math.asin(Math.sin(o)*Math.cos(c)+Math.cos(o)*Math.sin(c)*Math.cos(l)),a=s+Math.atan2(Math.sin(l)*Math.sin(c)*Math.cos(o),Math.cos(c)-Math.sin(o)*Math.sin(f)),u=Dn(a),g=Dn(f);return Xi([u,g],i.properties)}function Qo(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return Pn(e,i=>{n[0]>i[0]&&(n[0]=i[0]),n[1]>i[1]&&(n[1]=i[1]),n[2]<i[0]&&(n[2]=i[0]),n[3]<i[1]&&(n[3]=i[1])}),n}const bt=11102230246251565e-32,J=134217729,Mr=(3+8*bt)*bt;function Xe(e,t,n,i,r){let s,o,l,c,f=t[0],a=i[0],u=0,g=0;a>f==a>-f?(s=f,f=t[++u]):(s=a,a=i[++g]);let v=0;if(u<e&&g<n)for(a>f==a>-f?(o=f+s,l=s-(o-f),f=t[++u]):(o=a+s,l=s-(o-a),a=i[++g]),s=o,l!==0&&(r[v++]=l);u<e&&g<n;)a>f==a>-f?(o=s+f,c=o-s,l=s-(o-c)+(f-c),f=t[++u]):(o=s+a,c=o-s,l=s-(o-c)+(a-c),a=i[++g]),s=o,l!==0&&(r[v++]=l);for(;u<e;)o=s+f,c=o-s,l=s-(o-c)+(f-c),f=t[++u],s=o,l!==0&&(r[v++]=l);for(;g<n;)o=s+a,c=o-s,l=s-(o-c)+(a-c),a=i[++g],s=o,l!==0&&(r[v++]=l);return(s!==0||v===0)&&(r[v++]=s),v}function Pr(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function te(e){return new Float64Array(e)}const Tr=(3+16*bt)*bt,br=(2+12*bt)*bt,Ir=(9+64*bt)*bt*bt,$t=te(4),Un=te(8),Xn=te(12),Kn=te(16),it=te(4);function Rr(e,t,n,i,r,s,o){let l,c,f,a,u,g,v,S,T,I,R,_,N,L,C,O,k,h;const p=e-r,y=n-r,m=t-s,x=i-s;L=p*x,g=J*p,v=g-(g-p),S=p-v,g=J*x,T=g-(g-x),I=x-T,C=S*I-(L-v*T-S*T-v*I),O=m*y,g=J*m,v=g-(g-m),S=m-v,g=J*y,T=g-(g-y),I=y-T,k=S*I-(O-v*T-S*T-v*I),R=C-k,u=C-R,$t[0]=C-(R+u)+(u-k),_=L+R,u=_-L,N=L-(_-u)+(R-u),R=N-O,u=N-R,$t[1]=N-(R+u)+(u-O),h=_+R,u=h-_,$t[2]=_-(h-u)+(R-u),$t[3]=h;let E=Pr(4,$t),M=br*o;if(E>=M||-E>=M||(u=e-p,l=e-(p+u)+(u-r),u=n-y,f=n-(y+u)+(u-r),u=t-m,c=t-(m+u)+(u-s),u=i-x,a=i-(x+u)+(u-s),l===0&&c===0&&f===0&&a===0)||(M=Ir*o+Mr*Math.abs(E),E+=p*a+x*l-(m*f+y*c),E>=M||-E>=M))return E;L=l*x,g=J*l,v=g-(g-l),S=l-v,g=J*x,T=g-(g-x),I=x-T,C=S*I-(L-v*T-S*T-v*I),O=c*y,g=J*c,v=g-(g-c),S=c-v,g=J*y,T=g-(g-y),I=y-T,k=S*I-(O-v*T-S*T-v*I),R=C-k,u=C-R,it[0]=C-(R+u)+(u-k),_=L+R,u=_-L,N=L-(_-u)+(R-u),R=N-O,u=N-R,it[1]=N-(R+u)+(u-O),h=_+R,u=h-_,it[2]=_-(h-u)+(R-u),it[3]=h;const d=Xe(4,$t,4,it,Un);L=p*a,g=J*p,v=g-(g-p),S=p-v,g=J*a,T=g-(g-a),I=a-T,C=S*I-(L-v*T-S*T-v*I),O=m*f,g=J*m,v=g-(g-m),S=m-v,g=J*f,T=g-(g-f),I=f-T,k=S*I-(O-v*T-S*T-v*I),R=C-k,u=C-R,it[0]=C-(R+u)+(u-k),_=L+R,u=_-L,N=L-(_-u)+(R-u),R=N-O,u=N-R,it[1]=N-(R+u)+(u-O),h=_+R,u=h-_,it[2]=_-(h-u)+(R-u),it[3]=h;const w=Xe(d,Un,4,it,Xn);L=l*a,g=J*l,v=g-(g-l),S=l-v,g=J*a,T=g-(g-a),I=a-T,C=S*I-(L-v*T-S*T-v*I),O=c*f,g=J*c,v=g-(g-c),S=c-v,g=J*f,T=g-(g-f),I=f-T,k=S*I-(O-v*T-S*T-v*I),R=C-k,u=C-R,it[0]=C-(R+u)+(u-k),_=L+R,u=_-L,N=L-(_-u)+(R-u),R=N-O,u=N-R,it[1]=N-(R+u)+(u-O),h=_+R,u=h-_,it[2]=_-(h-u)+(R-u),it[3]=h;const P=Xe(w,Xn,4,it,Kn);return Kn[P-1]}function Ar(e,t,n,i,r,s){const o=(t-s)*(n-r),l=(e-r)*(i-s),c=o-l,f=Math.abs(o+l);return Math.abs(c)>=Tr*f?c:-Rr(e,t,n,i,r,s,f)}function Lr(e,t){var n,i,r=0,s,o,l,c,f,a,u,g=e[0],v=e[1],S=t.length;for(n=0;n<S;n++){i=0;var T=t[n],I=T.length-1;if(a=T[0],a[0]!==T[I][0]&&a[1]!==T[I][1])throw new Error("First and last coordinates in a ring must be the same");for(o=a[0]-g,l=a[1]-v,i;i<I;i++){if(u=T[i+1],c=u[0]-g,f=u[1]-v,l===0&&f===0){if(c<=0&&o>=0||o<=0&&c>=0)return 0}else if(f>=0&&l<=0||f<=0&&l>=0){if(s=Ar(o,c,l,f,0,0),s===0)return 0;(s>0&&f>0&&l<=0||s<0&&f<=0&&l>0)&&r++}a=u,l=f,o=c}}return r%2!==0}function Jo(e,t,n={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const i=Ui(e),r=mr(t),s=r.type,o=t.bbox;let l=r.coordinates;if(o&&Nr(i,o)===!1)return!1;s==="Polygon"&&(l=[l]);let c=!1;for(var f=0;f<l.length;++f){const a=Lr(i,l[f]);if(a===0)return!n.ignoreBoundary;a&&(c=!0)}return c}function Nr(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function Or(e,t={}){var n=typeof t=="object"?t.mutate:t;if(!e)throw new Error("geojson is required");var i=wr(e),r=[];switch(i){case"LineString":r=Ke(e,i);break;case"MultiLineString":case"Polygon":ge(e).forEach(function(o){r.push(Ke(o,i))});break;case"MultiPolygon":ge(e).forEach(function(o){var l=[];o.forEach(function(c){l.push(Ke(c,i))}),r.push(l)});break;case"Point":return e;case"MultiPoint":var s={};ge(e).forEach(function(o){var l=o.join("-");Object.prototype.hasOwnProperty.call(s,l)||(r.push(o),s[l]=!0)});break;default:throw new Error(i+" geometry not supported")}return e.coordinates?n===!0?(e.coordinates=r,e):{type:i,coordinates:r}:n===!0?(e.geometry.coordinates=r,e):xr({type:i,coordinates:r},e.properties,{bbox:e.bbox,id:e.id})}function Ke(e,t){var n=ge(e);if(n.length===2&&!Vn(n[0],n[1]))return n;var i=[],r=n.length-1,s=i.length;i.push(n[0]);for(var o=1;o<r;o++){var l=i[i.length-1];n[o][0]===l[0]&&n[o][1]===l[1]||(i.push(n[o]),s=i.length,s>2&&Yn(i[s-3],i[s-1],i[s-2])&&i.splice(i.length-2,1))}if(i.push(n[n.length-1]),s=i.length,(t==="Polygon"||t==="MultiPolygon")&&Vn(n[0],n[n.length-1])&&s<4)throw new Error("invalid polygon");return t==="LineString"&&s<3||Yn(i[s-3],i[s-1],i[s-2])&&i.splice(i.length-2,1),i}function Vn(e,t){return e[0]===t[0]&&e[1]===t[1]}function Yn(e,t,n){var i=n[0],r=n[1],s=e[0],o=e[1],l=t[0],c=t[1],f=i-s,a=r-o,u=l-s,g=c-o,v=f*g-a*u;return v!==0?!1:Math.abs(u)>=Math.abs(g)?u>0?s<=i&&i<=l:l<=i&&i<=s:g>0?o<=r&&r<=c:c<=r&&r<=o}var Cr=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Ve=Math.ceil,dt=Math.floor,ft="[BigNumber Error] ",Hn=ft+"Number primitive has more than 15 significant digits: ",wt=1e14,F=14,jn=9007199254740991,Ye=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Lt=1e7,at=1e9;function Yi(e){var t,n,i,r=_.prototype={constructor:_,toString:null,valueOf:null},s=new _(1),o=20,l=4,c=-7,f=21,a=-1e7,u=1e7,g=!1,v=1,S=0,T={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},I="0123456789abcdefghijklmnopqrstuvwxyz",R=!0;function _(h,p){var y,m,x,E,M,d,w,P,b=this;if(!(b instanceof _))return new _(h,p);if(p==null){if(h&&h._isBigNumber===!0){b.s=h.s,!h.c||h.e>u?b.c=b.e=null:h.e<a?b.c=[b.e=0]:(b.e=h.e,b.c=h.c.slice());return}if((d=typeof h=="number")&&h*0==0){if(b.s=1/h<0?(h=-h,-1):1,h===~~h){for(E=0,M=h;M>=10;M/=10,E++);E>u?b.c=b.e=null:(b.e=E,b.c=[h]);return}P=String(h)}else{if(!Cr.test(P=String(h)))return i(b,P,d);b.s=P.charCodeAt(0)==45?(P=P.slice(1),-1):1}(E=P.indexOf("."))>-1&&(P=P.replace(".","")),(M=P.search(/e/i))>0?(E<0&&(E=M),E+=+P.slice(M+1),P=P.substring(0,M)):E<0&&(E=P.length)}else{if(j(p,2,I.length,"Base"),p==10&&R)return b=new _(h),O(b,o+b.e+1,l);if(P=String(h),d=typeof h=="number"){if(h*0!=0)return i(b,P,d,p);if(b.s=1/h<0?(P=P.slice(1),-1):1,_.DEBUG&&P.replace(/^0\.0*|\./,"").length>15)throw Error(Hn+h)}else b.s=P.charCodeAt(0)===45?(P=P.slice(1),-1):1;for(y=I.slice(0,p),E=M=0,w=P.length;M<w;M++)if(y.indexOf(m=P.charAt(M))<0){if(m=="."){if(M>E){E=w;continue}}else if(!x&&(P==P.toUpperCase()&&(P=P.toLowerCase())||P==P.toLowerCase()&&(P=P.toUpperCase()))){x=!0,M=-1,E=0;continue}return i(b,String(h),d,p)}d=!1,P=n(P,p,10,b.s),(E=P.indexOf("."))>-1?P=P.replace(".",""):E=P.length}for(M=0;P.charCodeAt(M)===48;M++);for(w=P.length;P.charCodeAt(--w)===48;);if(P=P.slice(M,++w)){if(w-=M,d&&_.DEBUG&&w>15&&(h>jn||h!==dt(h)))throw Error(Hn+b.s*h);if((E=E-M-1)>u)b.c=b.e=null;else if(E<a)b.c=[b.e=0];else{if(b.e=E,b.c=[],M=(E+1)%F,E<0&&(M+=F),M<w){for(M&&b.c.push(+P.slice(0,M)),w-=F;M<w;)b.c.push(+P.slice(M,M+=F));M=F-(P=P.slice(M)).length}else M-=w;for(;M--;P+="0");b.c.push(+P)}}else b.c=[b.e=0]}_.clone=Yi,_.ROUND_UP=0,_.ROUND_DOWN=1,_.ROUND_CEIL=2,_.ROUND_FLOOR=3,_.ROUND_HALF_UP=4,_.ROUND_HALF_DOWN=5,_.ROUND_HALF_EVEN=6,_.ROUND_HALF_CEIL=7,_.ROUND_HALF_FLOOR=8,_.EUCLID=9,_.config=_.set=function(h){var p,y;if(h!=null)if(typeof h=="object"){if(h.hasOwnProperty(p="DECIMAL_PLACES")&&(y=h[p],j(y,0,at,p),o=y),h.hasOwnProperty(p="ROUNDING_MODE")&&(y=h[p],j(y,0,8,p),l=y),h.hasOwnProperty(p="EXPONENTIAL_AT")&&(y=h[p],y&&y.pop?(j(y[0],-1e9,0,p),j(y[1],0,at,p),c=y[0],f=y[1]):(j(y,-1e9,at,p),c=-(f=y<0?-y:y))),h.hasOwnProperty(p="RANGE"))if(y=h[p],y&&y.pop)j(y[0],-1e9,-1,p),j(y[1],1,at,p),a=y[0],u=y[1];else if(j(y,-1e9,at,p),y)a=-(u=y<0?-y:y);else throw Error(ft+p+" cannot be zero: "+y);if(h.hasOwnProperty(p="CRYPTO"))if(y=h[p],y===!!y)if(y)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))g=y;else throw g=!y,Error(ft+"crypto unavailable");else g=y;else throw Error(ft+p+" not true or false: "+y);if(h.hasOwnProperty(p="MODULO_MODE")&&(y=h[p],j(y,0,9,p),v=y),h.hasOwnProperty(p="POW_PRECISION")&&(y=h[p],j(y,0,at,p),S=y),h.hasOwnProperty(p="FORMAT"))if(y=h[p],typeof y=="object")T=y;else throw Error(ft+p+" not an object: "+y);if(h.hasOwnProperty(p="ALPHABET"))if(y=h[p],typeof y=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(y))R=y.slice(0,10)=="0123456789",I=y;else throw Error(ft+p+" invalid: "+y)}else throw Error(ft+"Object expected: "+h);return{DECIMAL_PLACES:o,ROUNDING_MODE:l,EXPONENTIAL_AT:[c,f],RANGE:[a,u],CRYPTO:g,MODULO_MODE:v,POW_PRECISION:S,FORMAT:T,ALPHABET:I}},_.isBigNumber=function(h){if(!h||h._isBigNumber!==!0)return!1;if(!_.DEBUG)return!0;var p,y,m=h.c,x=h.e,E=h.s;t:if({}.toString.call(m)=="[object Array]"){if((E===1||E===-1)&&x>=-1e9&&x<=at&&x===dt(x)){if(m[0]===0){if(x===0&&m.length===1)return!0;break t}if(p=(x+1)%F,p<1&&(p+=F),String(m[0]).length==p){for(p=0;p<m.length;p++)if(y=m[p],y<0||y>=wt||y!==dt(y))break t;if(y!==0)return!0}}}else if(m===null&&x===null&&(E===null||E===1||E===-1))return!0;throw Error(ft+"Invalid BigNumber: "+h)},_.maximum=_.max=function(){return L(arguments,-1)},_.minimum=_.min=function(){return L(arguments,1)},_.random=function(){var h=9007199254740992,p=Math.random()*h&2097151?function(){return dt(Math.random()*h)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(y){var m,x,E,M,d,w=0,P=[],b=new _(s);if(y==null?y=o:j(y,0,at),M=Ve(y/F),g)if(crypto.getRandomValues){for(m=crypto.getRandomValues(new Uint32Array(M*=2));w<M;)d=m[w]*131072+(m[w+1]>>>11),d>=9e15?(x=crypto.getRandomValues(new Uint32Array(2)),m[w]=x[0],m[w+1]=x[1]):(P.push(d%1e14),w+=2);w=M/2}else if(crypto.randomBytes){for(m=crypto.randomBytes(M*=7);w<M;)d=(m[w]&31)*281474976710656+m[w+1]*1099511627776+m[w+2]*4294967296+m[w+3]*16777216+(m[w+4]<<16)+(m[w+5]<<8)+m[w+6],d>=9e15?crypto.randomBytes(7).copy(m,w):(P.push(d%1e14),w+=7);w=M/7}else throw g=!1,Error(ft+"crypto unavailable");if(!g)for(;w<M;)d=p(),d<9e15&&(P[w++]=d%1e14);for(M=P[--w],y%=F,M&&y&&(d=Ye[F-y],P[w]=dt(M/d)*d);P[w]===0;P.pop(),w--);if(w<0)P=[E=0];else{for(E=-1;P[0]===0;P.splice(0,1),E-=F);for(w=1,d=P[0];d>=10;d/=10,w++);w<F&&(E-=F-w)}return b.e=E,b.c=P,b}}(),_.sum=function(){for(var h=1,p=arguments,y=new _(p[0]);h<p.length;)y=y.plus(p[h++]);return y},n=function(){var h="0123456789";function p(y,m,x,E){for(var M,d=[0],w,P=0,b=y.length;P<b;){for(w=d.length;w--;d[w]*=m);for(d[0]+=E.indexOf(y.charAt(P++)),M=0;M<d.length;M++)d[M]>x-1&&(d[M+1]==null&&(d[M+1]=0),d[M+1]+=d[M]/x|0,d[M]%=x)}return d.reverse()}return function(y,m,x,E,M){var d,w,P,b,A,$,B,G,K=y.indexOf("."),H=o,q=l;for(K>=0&&(b=S,S=0,y=y.replace(".",""),G=new _(m),$=G.pow(y.length-K),S=b,G.c=p(Tt(pt($.c),$.e,"0"),10,x,h),G.e=G.c.length),B=p(y,m,x,M?(d=I,h):(d=h,I)),P=b=B.length;B[--b]==0;B.pop());if(!B[0])return d.charAt(0);if(K<0?--P:($.c=B,$.e=P,$.s=E,$=t($,G,H,q,x),B=$.c,A=$.r,P=$.e),w=P+H+1,K=B[w],b=x/2,A=A||w<0||B[w+1]!=null,A=q<4?(K!=null||A)&&(q==0||q==($.s<0?3:2)):K>b||K==b&&(q==4||A||q==6&&B[w-1]&1||q==($.s<0?8:7)),w<1||!B[0])y=A?Tt(d.charAt(1),-H,d.charAt(0)):d.charAt(0);else{if(B.length=w,A)for(--x;++B[--w]>x;)B[w]=0,w||(++P,B=[1].concat(B));for(b=B.length;!B[--b];);for(K=0,y="";K<=b;y+=d.charAt(B[K++]));y=Tt(y,P,d.charAt(0))}return y}}(),t=function(){function h(m,x,E){var M,d,w,P,b=0,A=m.length,$=x%Lt,B=x/Lt|0;for(m=m.slice();A--;)w=m[A]%Lt,P=m[A]/Lt|0,M=B*w+P*$,d=$*w+M%Lt*Lt+b,b=(d/E|0)+(M/Lt|0)+B*P,m[A]=d%E;return b&&(m=[b].concat(m)),m}function p(m,x,E,M){var d,w;if(E!=M)w=E>M?1:-1;else for(d=w=0;d<E;d++)if(m[d]!=x[d]){w=m[d]>x[d]?1:-1;break}return w}function y(m,x,E,M){for(var d=0;E--;)m[E]-=d,d=m[E]<x[E]?1:0,m[E]=d*M+m[E]-x[E];for(;!m[0]&&m.length>1;m.splice(0,1));}return function(m,x,E,M,d){var w,P,b,A,$,B,G,K,H,q,V,Q,ie,ze,De,Et,Kt,gt=m.s==x.s?1:-1,nt=m.c,Z=x.c;if(!nt||!nt[0]||!Z||!Z[0])return new _(!m.s||!x.s||(nt?Z&&nt[0]==Z[0]:!Z)?NaN:nt&&nt[0]==0||!Z?gt*0:gt/0);for(K=new _(gt),H=K.c=[],P=m.e-x.e,gt=E+P+1,d||(d=wt,P=yt(m.e/F)-yt(x.e/F),gt=gt/F|0),b=0;Z[b]==(nt[b]||0);b++);if(Z[b]>(nt[b]||0)&&P--,gt<0)H.push(1),A=!0;else{for(ze=nt.length,Et=Z.length,b=0,gt+=2,$=dt(d/(Z[0]+1)),$>1&&(Z=h(Z,$,d),nt=h(nt,$,d),Et=Z.length,ze=nt.length),ie=Et,q=nt.slice(0,Et),V=q.length;V<Et;q[V++]=0);Kt=Z.slice(),Kt=[0].concat(Kt),De=Z[0],Z[1]>=d/2&&De++;do{if($=0,w=p(Z,q,Et,V),w<0){if(Q=q[0],Et!=V&&(Q=Q*d+(q[1]||0)),$=dt(Q/De),$>1)for($>=d&&($=d-1),B=h(Z,$,d),G=B.length,V=q.length;p(B,q,G,V)==1;)$--,y(B,Et<G?Kt:Z,G,d),G=B.length,w=1;else $==0&&(w=$=1),B=Z.slice(),G=B.length;if(G<V&&(B=[0].concat(B)),y(q,B,V,d),V=q.length,w==-1)for(;p(Z,q,Et,V)<1;)$++,y(q,Et<V?Kt:Z,V,d),V=q.length}else w===0&&($++,q=[0]);H[b++]=$,q[0]?q[V++]=nt[ie]||0:(q=[nt[ie]],V=1)}while((ie++<ze||q[0]!=null)&&gt--);A=q[0]!=null,H[0]||H.splice(0,1)}if(d==wt){for(b=1,gt=H[0];gt>=10;gt/=10,b++);O(K,E+(K.e=b+P*F-1)+1,M,A)}else K.e=P,K.r=+A;return K}}();function N(h,p,y,m){var x,E,M,d,w;if(y==null?y=l:j(y,0,8),!h.c)return h.toString();if(x=h.c[0],M=h.e,p==null)w=pt(h.c),w=m==1||m==2&&(M<=c||M>=f)?se(w,M):Tt(w,M,"0");else if(h=O(new _(h),p,y),E=h.e,w=pt(h.c),d=w.length,m==1||m==2&&(p<=E||E<=c)){for(;d<p;w+="0",d++);w=se(w,E)}else if(p-=M,w=Tt(w,E,"0"),E+1>d){if(--p>0)for(w+=".";p--;w+="0");}else if(p+=E-d,p>0)for(E+1==d&&(w+=".");p--;w+="0");return h.s<0&&x?"-"+w:w}function L(h,p){for(var y,m,x=1,E=new _(h[0]);x<h.length;x++)m=new _(h[x]),(!m.s||(y=Ot(E,m))===p||y===0&&E.s===p)&&(E=m);return E}function C(h,p,y){for(var m=1,x=p.length;!p[--x];p.pop());for(x=p[0];x>=10;x/=10,m++);return(y=m+y*F-1)>u?h.c=h.e=null:y<a?h.c=[h.e=0]:(h.e=y,h.c=p),h}i=function(){var h=/^(-?)0([xbo])(?=\w[\w.]*$)/i,p=/^([^.]+)\.$/,y=/^\.([^.]+)$/,m=/^-?(Infinity|NaN)$/,x=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(E,M,d,w){var P,b=d?M:M.replace(x,"");if(m.test(b))E.s=isNaN(b)?null:b<0?-1:1;else{if(!d&&(b=b.replace(h,function(A,$,B){return P=(B=B.toLowerCase())=="x"?16:B=="b"?2:8,!w||w==P?$:A}),w&&(P=w,b=b.replace(p,"$1").replace(y,"0.$1")),M!=b))return new _(b,P);if(_.DEBUG)throw Error(ft+"Not a"+(w?" base "+w:"")+" number: "+M);E.s=null}E.c=E.e=null}}();function O(h,p,y,m){var x,E,M,d,w,P,b,A=h.c,$=Ye;if(A){t:{for(x=1,d=A[0];d>=10;d/=10,x++);if(E=p-x,E<0)E+=F,M=p,w=A[P=0],b=dt(w/$[x-M-1]%10);else if(P=Ve((E+1)/F),P>=A.length)if(m){for(;A.length<=P;A.push(0));w=b=0,x=1,E%=F,M=E-F+1}else break t;else{for(w=d=A[P],x=1;d>=10;d/=10,x++);E%=F,M=E-F+x,b=M<0?0:dt(w/$[x-M-1]%10)}if(m=m||p<0||A[P+1]!=null||(M<0?w:w%$[x-M-1]),m=y<4?(b||m)&&(y==0||y==(h.s<0?3:2)):b>5||b==5&&(y==4||m||y==6&&(E>0?M>0?w/$[x-M]:0:A[P-1])%10&1||y==(h.s<0?8:7)),p<1||!A[0])return A.length=0,m?(p-=h.e+1,A[0]=$[(F-p%F)%F],h.e=-p||0):A[0]=h.e=0,h;if(E==0?(A.length=P,d=1,P--):(A.length=P+1,d=$[F-E],A[P]=M>0?dt(w/$[x-M]%$[M])*d:0),m)for(;;)if(P==0){for(E=1,M=A[0];M>=10;M/=10,E++);for(M=A[0]+=d,d=1;M>=10;M/=10,d++);E!=d&&(h.e++,A[0]==wt&&(A[0]=1));break}else{if(A[P]+=d,A[P]!=wt)break;A[P--]=0,d=1}for(E=A.length;A[--E]===0;A.pop());}h.e>u?h.c=h.e=null:h.e<a&&(h.c=[h.e=0])}return h}function k(h){var p,y=h.e;return y===null?h.toString():(p=pt(h.c),p=y<=c||y>=f?se(p,y):Tt(p,y,"0"),h.s<0?"-"+p:p)}return r.absoluteValue=r.abs=function(){var h=new _(this);return h.s<0&&(h.s=1),h},r.comparedTo=function(h,p){return Ot(this,new _(h,p))},r.decimalPlaces=r.dp=function(h,p){var y,m,x,E=this;if(h!=null)return j(h,0,at),p==null?p=l:j(p,0,8),O(new _(E),h+E.e+1,p);if(!(y=E.c))return null;if(m=((x=y.length-1)-yt(this.e/F))*F,x=y[x])for(;x%10==0;x/=10,m--);return m<0&&(m=0),m},r.dividedBy=r.div=function(h,p){return t(this,new _(h,p),o,l)},r.dividedToIntegerBy=r.idiv=function(h,p){return t(this,new _(h,p),0,1)},r.exponentiatedBy=r.pow=function(h,p){var y,m,x,E,M,d,w,P,b,A=this;if(h=new _(h),h.c&&!h.isInteger())throw Error(ft+"Exponent not an integer: "+k(h));if(p!=null&&(p=new _(p)),d=h.e>14,!A.c||!A.c[0]||A.c[0]==1&&!A.e&&A.c.length==1||!h.c||!h.c[0])return b=new _(Math.pow(+k(A),d?h.s*(2-re(h)):+k(h))),p?b.mod(p):b;if(w=h.s<0,p){if(p.c?!p.c[0]:!p.s)return new _(NaN);m=!w&&A.isInteger()&&p.isInteger(),m&&(A=A.mod(p))}else{if(h.e>9&&(A.e>0||A.e<-1||(A.e==0?A.c[0]>1||d&&A.c[1]>=24e7:A.c[0]<8e13||d&&A.c[0]<=9999975e7)))return E=A.s<0&&re(h)?-0:0,A.e>-1&&(E=1/E),new _(w?1/E:E);S&&(E=Ve(S/F+2))}for(d?(y=new _(.5),w&&(h.s=1),P=re(h)):(x=Math.abs(+k(h)),P=x%2),b=new _(s);;){if(P){if(b=b.times(A),!b.c)break;E?b.c.length>E&&(b.c.length=E):m&&(b=b.mod(p))}if(x){if(x=dt(x/2),x===0)break;P=x%2}else if(h=h.times(y),O(h,h.e+1,1),h.e>14)P=re(h);else{if(x=+k(h),x===0)break;P=x%2}A=A.times(A),E?A.c&&A.c.length>E&&(A.c.length=E):m&&(A=A.mod(p))}return m?b:(w&&(b=s.div(b)),p?b.mod(p):E?O(b,S,l,M):b)},r.integerValue=function(h){var p=new _(this);return h==null?h=l:j(h,0,8),O(p,p.e+1,h)},r.isEqualTo=r.eq=function(h,p){return Ot(this,new _(h,p))===0},r.isFinite=function(){return!!this.c},r.isGreaterThan=r.gt=function(h,p){return Ot(this,new _(h,p))>0},r.isGreaterThanOrEqualTo=r.gte=function(h,p){return(p=Ot(this,new _(h,p)))===1||p===0},r.isInteger=function(){return!!this.c&&yt(this.e/F)>this.c.length-2},r.isLessThan=r.lt=function(h,p){return Ot(this,new _(h,p))<0},r.isLessThanOrEqualTo=r.lte=function(h,p){return(p=Ot(this,new _(h,p)))===-1||p===0},r.isNaN=function(){return!this.s},r.isNegative=function(){return this.s<0},r.isPositive=function(){return this.s>0},r.isZero=function(){return!!this.c&&this.c[0]==0},r.minus=function(h,p){var y,m,x,E,M=this,d=M.s;if(h=new _(h,p),p=h.s,!d||!p)return new _(NaN);if(d!=p)return h.s=-p,M.plus(h);var w=M.e/F,P=h.e/F,b=M.c,A=h.c;if(!w||!P){if(!b||!A)return b?(h.s=-p,h):new _(A?M:NaN);if(!b[0]||!A[0])return A[0]?(h.s=-p,h):new _(b[0]?M:l==3?-0:0)}if(w=yt(w),P=yt(P),b=b.slice(),d=w-P){for((E=d<0)?(d=-d,x=b):(P=w,x=A),x.reverse(),p=d;p--;x.push(0));x.reverse()}else for(m=(E=(d=b.length)<(p=A.length))?d:p,d=p=0;p<m;p++)if(b[p]!=A[p]){E=b[p]<A[p];break}if(E&&(x=b,b=A,A=x,h.s=-h.s),p=(m=A.length)-(y=b.length),p>0)for(;p--;b[y++]=0);for(p=wt-1;m>d;){if(b[--m]<A[m]){for(y=m;y&&!b[--y];b[y]=p);--b[y],b[m]+=wt}b[m]-=A[m]}for(;b[0]==0;b.splice(0,1),--P);return b[0]?C(h,b,P):(h.s=l==3?-1:1,h.c=[h.e=0],h)},r.modulo=r.mod=function(h,p){var y,m,x=this;return h=new _(h,p),!x.c||!h.s||h.c&&!h.c[0]?new _(NaN):!h.c||x.c&&!x.c[0]?new _(x):(v==9?(m=h.s,h.s=1,y=t(x,h,0,3),h.s=m,y.s*=m):y=t(x,h,0,v),h=x.minus(y.times(h)),!h.c[0]&&v==1&&(h.s=x.s),h)},r.multipliedBy=r.times=function(h,p){var y,m,x,E,M,d,w,P,b,A,$,B,G,K,H,q=this,V=q.c,Q=(h=new _(h,p)).c;if(!V||!Q||!V[0]||!Q[0])return!q.s||!h.s||V&&!V[0]&&!Q||Q&&!Q[0]&&!V?h.c=h.e=h.s=null:(h.s*=q.s,!V||!Q?h.c=h.e=null:(h.c=[0],h.e=0)),h;for(m=yt(q.e/F)+yt(h.e/F),h.s*=q.s,w=V.length,A=Q.length,w<A&&(G=V,V=Q,Q=G,x=w,w=A,A=x),x=w+A,G=[];x--;G.push(0));for(K=wt,H=Lt,x=A;--x>=0;){for(y=0,$=Q[x]%H,B=Q[x]/H|0,M=w,E=x+M;E>x;)P=V[--M]%H,b=V[M]/H|0,d=B*P+b*$,P=$*P+d%H*H+G[E]+y,y=(P/K|0)+(d/H|0)+B*b,G[E--]=P%K;G[E]=y}return y?++m:G.splice(0,1),C(h,G,m)},r.negated=function(){var h=new _(this);return h.s=-h.s||null,h},r.plus=function(h,p){var y,m=this,x=m.s;if(h=new _(h,p),p=h.s,!x||!p)return new _(NaN);if(x!=p)return h.s=-p,m.minus(h);var E=m.e/F,M=h.e/F,d=m.c,w=h.c;if(!E||!M){if(!d||!w)return new _(x/0);if(!d[0]||!w[0])return w[0]?h:new _(d[0]?m:x*0)}if(E=yt(E),M=yt(M),d=d.slice(),x=E-M){for(x>0?(M=E,y=w):(x=-x,y=d),y.reverse();x--;y.push(0));y.reverse()}for(x=d.length,p=w.length,x-p<0&&(y=w,w=d,d=y,p=x),x=0;p;)x=(d[--p]=d[p]+w[p]+x)/wt|0,d[p]=wt===d[p]?0:d[p]%wt;return x&&(d=[x].concat(d),++M),C(h,d,M)},r.precision=r.sd=function(h,p){var y,m,x,E=this;if(h!=null&&h!==!!h)return j(h,1,at),p==null?p=l:j(p,0,8),O(new _(E),h,p);if(!(y=E.c))return null;if(x=y.length-1,m=x*F+1,x=y[x]){for(;x%10==0;x/=10,m--);for(x=y[0];x>=10;x/=10,m++);}return h&&E.e+1>m&&(m=E.e+1),m},r.shiftedBy=function(h){return j(h,-9007199254740991,jn),this.times("1e"+h)},r.squareRoot=r.sqrt=function(){var h,p,y,m,x,E=this,M=E.c,d=E.s,w=E.e,P=o+4,b=new _("0.5");if(d!==1||!M||!M[0])return new _(!d||d<0&&(!M||M[0])?NaN:M?E:1/0);if(d=Math.sqrt(+k(E)),d==0||d==1/0?(p=pt(M),(p.length+w)%2==0&&(p+="0"),d=Math.sqrt(+p),w=yt((w+1)/2)-(w<0||w%2),d==1/0?p="5e"+w:(p=d.toExponential(),p=p.slice(0,p.indexOf("e")+1)+w),y=new _(p)):y=new _(d+""),y.c[0]){for(w=y.e,d=w+P,d<3&&(d=0);;)if(x=y,y=b.times(x.plus(t(E,x,P,1))),pt(x.c).slice(0,d)===(p=pt(y.c)).slice(0,d))if(y.e<w&&--d,p=p.slice(d-3,d+1),p=="9999"||!m&&p=="4999"){if(!m&&(O(x,x.e+o+2,0),x.times(x).eq(E))){y=x;break}P+=4,d+=4,m=1}else{(!+p||!+p.slice(1)&&p.charAt(0)=="5")&&(O(y,y.e+o+2,1),h=!y.times(y).eq(E));break}}return O(y,y.e+o+1,l,h)},r.toExponential=function(h,p){return h!=null&&(j(h,0,at),h++),N(this,h,p,1)},r.toFixed=function(h,p){return h!=null&&(j(h,0,at),h=h+this.e+1),N(this,h,p)},r.toFormat=function(h,p,y){var m,x=this;if(y==null)h!=null&&p&&typeof p=="object"?(y=p,p=null):h&&typeof h=="object"?(y=h,h=p=null):y=T;else if(typeof y!="object")throw Error(ft+"Argument not an object: "+y);if(m=x.toFixed(h,p),x.c){var E,M=m.split("."),d=+y.groupSize,w=+y.secondaryGroupSize,P=y.groupSeparator||"",b=M[0],A=M[1],$=x.s<0,B=$?b.slice(1):b,G=B.length;if(w&&(E=d,d=w,w=E,G-=E),d>0&&G>0){for(E=G%d||d,b=B.substr(0,E);E<G;E+=d)b+=P+B.substr(E,d);w>0&&(b+=P+B.slice(E)),$&&(b="-"+b)}m=A?b+(y.decimalSeparator||"")+((w=+y.fractionGroupSize)?A.replace(new RegExp("\\d{"+w+"}\\B","g"),"$&"+(y.fractionGroupSeparator||"")):A):b}return(y.prefix||"")+m+(y.suffix||"")},r.toFraction=function(h){var p,y,m,x,E,M,d,w,P,b,A,$,B=this,G=B.c;if(h!=null&&(d=new _(h),!d.isInteger()&&(d.c||d.s!==1)||d.lt(s)))throw Error(ft+"Argument "+(d.isInteger()?"out of range: ":"not an integer: ")+k(d));if(!G)return new _(B);for(p=new _(s),P=y=new _(s),m=w=new _(s),$=pt(G),E=p.e=$.length-B.e-1,p.c[0]=Ye[(M=E%F)<0?F+M:M],h=!h||d.comparedTo(p)>0?E>0?p:P:d,M=u,u=1/0,d=new _($),w.c[0]=0;b=t(d,p,0,1),x=y.plus(b.times(m)),x.comparedTo(h)!=1;)y=m,m=x,P=w.plus(b.times(x=P)),w=x,p=d.minus(b.times(x=p)),d=x;return x=t(h.minus(y),m,0,1),w=w.plus(x.times(P)),y=y.plus(x.times(m)),w.s=P.s=B.s,E=E*2,A=t(P,m,E,l).minus(B).abs().comparedTo(t(w,y,E,l).minus(B).abs())<1?[P,m]:[w,y],u=M,A},r.toNumber=function(){return+k(this)},r.toPrecision=function(h,p){return h!=null&&j(h,1,at),N(this,h,p,2)},r.toString=function(h){var p,y=this,m=y.s,x=y.e;return x===null?m?(p="Infinity",m<0&&(p="-"+p)):p="NaN":(h==null?p=x<=c||x>=f?se(pt(y.c),x):Tt(pt(y.c),x,"0"):h===10&&R?(y=O(new _(y),o+x+1,l),p=Tt(pt(y.c),y.e,"0")):(j(h,2,I.length,"Base"),p=n(Tt(pt(y.c),x,"0"),10,h,m,!0)),m<0&&y.c[0]&&(p="-"+p)),p},r.valueOf=r.toJSON=function(){return k(this)},r._isBigNumber=!0,r[Symbol.toStringTag]="BigNumber",r[Symbol.for("nodejs.util.inspect.custom")]=r.valueOf,e!=null&&_.set(e),_}function yt(e){var t=e|0;return e>0||e===t?t:t-1}function pt(e){for(var t,n,i=1,r=e.length,s=e[0]+"";i<r;){for(t=e[i++]+"",n=F-t.length;n--;t="0"+t);s+=t}for(r=s.length;s.charCodeAt(--r)===48;);return s.slice(0,r+1||1)}function Ot(e,t){var n,i,r=e.c,s=t.c,o=e.s,l=t.s,c=e.e,f=t.e;if(!o||!l)return null;if(n=r&&!r[0],i=s&&!s[0],n||i)return n?i?0:-l:o;if(o!=l)return o;if(n=o<0,i=c==f,!r||!s)return i?0:!r^n?1:-1;if(!i)return c>f^n?1:-1;for(l=(c=r.length)<(f=s.length)?c:f,o=0;o<l;o++)if(r[o]!=s[o])return r[o]>s[o]^n?1:-1;return c==f?0:c>f^n?1:-1}function j(e,t,n,i){if(e<t||e>n||e!==dt(e))throw Error(ft+(i||"Argument")+(typeof e=="number"?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function re(e){var t=e.c.length-1;return yt(e.e/F)==t&&e.c[t]%2!=0}function se(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Tt(e,t,n){var i,r;if(t<0){for(r=n+".";++t;r+=n);e=r+e}else if(i=e.length,++t>i){for(r=n,t-=i;--t;r+=n);e+=r}else t<i&&(e=e.slice(0,t)+"."+e.slice(t));return e}var Mt=Yi(),kr=class{key;left=null;right=null;constructor(e){this.key=e}},Vt=class extends kr{constructor(e){super(e)}},$r=class{size=0;modificationCount=0;splayCount=0;splay(e){const t=this.root;if(t==null)return this.compare(e,e),-1;let n=null,i=null,r=null,s=null,o=t;const l=this.compare;let c;for(;;)if(c=l(o.key,e),c>0){let f=o.left;if(f==null||(c=l(f.key,e),c>0&&(o.left=f.right,f.right=o,o=f,f=o.left,f==null)))break;n==null?i=o:n.left=o,n=o,o=f}else if(c<0){let f=o.right;if(f==null||(c=l(f.key,e),c<0&&(o.right=f.left,f.left=o,o=f,f=o.right,f==null)))break;r==null?s=o:r.right=o,r=o,o=f}else break;return r!=null&&(r.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=i),this.root!==o&&(this.root=o,this.splayCount++),c}splayMin(e){let t=e,n=t.left;for(;n!=null;){const i=n;t.left=i.right,i.right=t,t=i,n=t.left}return t}splayMax(e){let t=e,n=t.right;for(;n!=null;){const i=n;t.right=i.left,i.left=t,t=i,n=t.right}return t}_delete(e){if(this.root==null||this.splay(e)!=0)return null;let n=this.root;const i=n,r=n.left;if(this.size--,r==null)this.root=n.right;else{const s=n.right;n=this.splayMax(r),n.right=s,this.root=n}return this.modificationCount++,i}addNewRoot(e,t){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=e;return}t<0?(e.left=n,e.right=n.right,n.right=null):(e.right=n,e.left=n.left,n.left=null),this.root=e}_first(){const e=this.root;return e==null?null:(this.root=this.splayMin(e),this.root)}_last(){const e=this.root;return e==null?null:(this.root=this.splayMax(e),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(e){return this.validKey(e)&&this.splay(e)==0}defaultCompare(){return(e,t)=>e<t?-1:e>t?1:0}wrap(){return{getRoot:()=>this.root,setRoot:e=>{this.root=e},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:e=>{this.splayCount=e},splay:e=>this.splay(e),has:e=>this.has(e)}}},Ee=class jt extends $r{root=null;compare;validKey;constructor(t,n){super(),this.compare=t??this.defaultCompare(),this.validKey=n??(i=>i!=null&&i!=null)}delete(t){return this.validKey(t)?this._delete(t)!=null:!1}deleteAll(t){for(const n of t)this.delete(n)}forEach(t){const n=this[Symbol.iterator]();let i;for(;i=n.next(),!i.done;)t(i.value,i.value,this)}add(t){const n=this.splay(t);return n!=0&&this.addNewRoot(new Vt(t),n),this}addAndReturn(t){const n=this.splay(t);return n!=0&&this.addNewRoot(new Vt(t),n),this.root.key}addAll(t){for(const n of t)this.add(n)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let r=i.right;for(;r!=null;)i=r,r=i.right;return i.key}firstAfter(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let r=i.left;for(;r!=null;)i=r,r=i.left;return i.key}retainAll(t){const n=new jt(this.compare,this.validKey),i=this.modificationCount;for(const r of t){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(r)&&this.splay(r)==0&&n.add(this.root.key)}n.size!=this.size&&(this.root=n.root,this.size=n.size,this.modificationCount++)}lookup(t){return!this.validKey(t)||this.splay(t)!=0?null:this.root.key}intersection(t){const n=new jt(this.compare,this.validKey);for(const i of this)t.has(i)&&n.add(i);return n}difference(t){const n=new jt(this.compare,this.validKey);for(const i of this)t.has(i)||n.add(i);return n}union(t){const n=this.clone();return n.addAll(t),n}clone(){const t=new jt(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}copyNode(t){if(t==null)return null;function n(r,s){let o,l;do{if(o=r.left,l=r.right,o!=null){const c=new Vt(o.key);s.left=c,n(o,c)}if(l!=null){const c=new Vt(l.key);s.right=c,r=l,s=c}}while(l!=null)}const i=new Vt(t.key);return n(t,i),i}toSet(){return this.clone()}entries(){return new Fr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[Symbol.iterator](){return new Br(this.wrap())}[Symbol.toStringTag]="[object Set]"},Hi=class{tree;path=new Array;modificationCount=null;splayCount;constructor(e){this.tree=e,this.splayCount=e.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const e=this.path[this.path.length-1];return this.getValue(e)}rebuildPath(e){this.path.splice(0,this.path.length),this.tree.splay(e),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(e){for(;e!=null;)this.path.push(e),e=e.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let e=this.path[this.path.length-1],t=e.right;if(t!=null){for(;t!=null;)this.path.push(t),t=t.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}},Br=class extends Hi{getValue(e){return e.key}},Fr=class extends Hi{getValue(e){return[e.key,e.key]}},ji=e=>()=>e,tn=e=>{const t=e?(n,i)=>i.minus(n).abs().isLessThanOrEqualTo(e):ji(!1);return(n,i)=>t(n,i)?0:n.comparedTo(i)};function Gr(e){const t=e?(n,i,r,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(i).exponentiatedBy(2).plus(o.minus(r).exponentiatedBy(2)).times(e)):ji(!1);return(n,i,r)=>{const s=n.x,o=n.y,l=r.x,c=r.y,f=o.minus(c).times(i.x.minus(l)).minus(s.minus(l).times(i.y.minus(c)));return t(f,s,o,l,c)?0:f.comparedTo(0)}}var qr=e=>e,zr=e=>{if(e){const t=new Ee(tn(e)),n=new Ee(tn(e)),i=(s,o)=>o.addAndReturn(s),r=s=>({x:i(s.x,t),y:i(s.y,n)});return r({x:new Mt(0),y:new Mt(0)}),r}return qr},en=e=>({set:t=>{Rt=en(t)},reset:()=>en(e),compare:tn(e),snap:zr(e),orient:Gr(e)}),Rt=en(),Yt=(e,t)=>e.ll.x.isLessThanOrEqualTo(t.x)&&t.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(t.y)&&t.y.isLessThanOrEqualTo(e.ur.y),nn=(e,t)=>{if(t.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(t.ll.x)||t.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(t.ll.y))return null;const n=e.ll.x.isLessThan(t.ll.x)?t.ll.x:e.ll.x,i=e.ur.x.isLessThan(t.ur.x)?e.ur.x:t.ur.x,r=e.ll.y.isLessThan(t.ll.y)?t.ll.y:e.ll.y,s=e.ur.y.isLessThan(t.ur.y)?e.ur.y:t.ur.y;return{ll:{x:n,y:r},ur:{x:i,y:s}}},pe=(e,t)=>e.x.times(t.y).minus(e.y.times(t.x)),Wi=(e,t)=>e.x.times(t.x).plus(e.y.times(t.y)),Se=e=>Wi(e,e).sqrt(),Dr=(e,t,n)=>{const i={x:t.x.minus(e.x),y:t.y.minus(e.y)},r={x:n.x.minus(e.x),y:n.y.minus(e.y)};return pe(r,i).div(Se(r)).div(Se(i))},Ur=(e,t,n)=>{const i={x:t.x.minus(e.x),y:t.y.minus(e.y)},r={x:n.x.minus(e.x),y:n.y.minus(e.y)};return Wi(r,i).div(Se(r)).div(Se(i))},Wn=(e,t,n)=>t.y.isZero()?null:{x:e.x.plus(t.x.div(t.y).times(n.minus(e.y))),y:n},Zn=(e,t,n)=>t.x.isZero()?null:{x:n,y:e.y.plus(t.y.div(t.x).times(n.minus(e.x)))},Xr=(e,t,n,i)=>{if(t.x.isZero())return Zn(n,i,e.x);if(i.x.isZero())return Zn(e,t,n.x);if(t.y.isZero())return Wn(n,i,e.y);if(i.y.isZero())return Wn(e,t,n.y);const r=pe(t,i);if(r.isZero())return null;const s={x:n.x.minus(e.x),y:n.y.minus(e.y)},o=pe(s,t).div(r),l=pe(s,i).div(r),c=e.x.plus(l.times(t.x)),f=n.x.plus(o.times(i.x)),a=e.y.plus(l.times(t.y)),u=n.y.plus(o.times(i.y)),g=c.plus(f).div(2),v=a.plus(u).div(2);return{x:g,y:v}},St=class Zi{point;isLeft;segment;otherSE;consumedBy;static compare(t,n){const i=Zi.comparePoints(t.point,n.point);return i!==0?i:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:_e.compare(t.segment,n.segment))}static comparePoints(t,n){return t.x.isLessThan(n.x)?-1:t.x.isGreaterThan(n.x)?1:t.y.isLessThan(n.y)?-1:t.y.isGreaterThan(n.y)?1:0}constructor(t,n){t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const n=t.point.events;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let n=0;n<t;n++){const i=this.point.events[n];if(i.segment.consumedBy===void 0)for(let r=n+1;r<t;r++){const s=this.point.events[r];s.consumedBy===void 0&&i.otherSE.point.events===s.otherSE.point.events&&i.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const t=[];for(let n=0,i=this.point.events.length;n<i;n++){const r=this.point.events[n];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}getLeftmostComparator(t){const n=new Map,i=r=>{const s=r.otherSE;n.set(r,{sine:Dr(this.point,t.point,s.point),cosine:Ur(this.point,t.point,s.point)})};return(r,s)=>{n.has(r)||i(r),n.has(s)||i(s);const{sine:o,cosine:l}=n.get(r),{sine:c,cosine:f}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&c.isGreaterThanOrEqualTo(0)?l.isLessThan(f)?1:l.isGreaterThan(f)?-1:0:o.isLessThan(0)&&c.isLessThan(0)?l.isLessThan(f)?-1:l.isGreaterThan(f)?1:0:c.isLessThan(o)?-1:c.isGreaterThan(o)?1:0}}},Kr=class rn{events;poly;_isExteriorRing;_enclosingRing;static factory(t){const n=[];for(let i=0,r=t.length;i<r;i++){const s=t[i];if(!s.isInResult()||s.ringOut)continue;let o=null,l=s.leftSE,c=s.rightSE;const f=[l],a=l.point,u=[];for(;o=l,l=c,f.push(l),l.point!==a;)for(;;){const g=l.getAvailableLinkedEvents();if(g.length===0){const T=f[0].point,I=f[f.length-1].point;throw new Error(`Unable to complete output ring starting at [${T.x}, ${T.y}]. Last matching segment found ends at [${I.x}, ${I.y}].`)}if(g.length===1){c=g[0].otherSE;break}let v=null;for(let T=0,I=u.length;T<I;T++)if(u[T].point===l.point){v=T;break}if(v!==null){const T=u.splice(v)[0],I=f.splice(T.index);I.unshift(I[0].otherSE),n.push(new rn(I.reverse()));continue}u.push({index:f.length,point:l.point});const S=l.getLeftmostComparator(o);c=g.sort(S)[0].otherSE;break}n.push(new rn(f))}return n}constructor(t){this.events=t;for(let n=0,i=t.length;n<i;n++)t[n].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const n=[t];for(let f=1,a=this.events.length-1;f<a;f++){const u=this.events[f].point,g=this.events[f+1].point;Rt.orient(u,t,g)!==0&&(n.push(u),t=u)}if(n.length===1)return null;const i=n[0],r=n[1];Rt.orient(i,t,r)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,l=this.isExteriorRing()?n.length:-1,c=[];for(let f=o;f!=l;f+=s)c.push([n[f].x.toNumber(),n[f].y.toNumber()]);return c}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let r=1,s=this.events.length;r<s;r++){const o=this.events[r];St.compare(t,o)>0&&(t=o)}let n=t.segment.prevInResult(),i=n?n.prevInResult():null;for(;;){if(!n)return null;if(!i)return n.ringOut;if(i.ringOut!==n.ringOut)return i.ringOut?.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut?.enclosingRing();n=i.prevInResult(),i=n?n.prevInResult():null}}},Qn=class{exteriorRing;interiorRings;constructor(e){this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=this.exteriorRing.getGeom();if(e===null)return null;const t=[e];for(let n=0,i=this.interiorRings.length;n<i;n++){const r=this.interiorRings[n].getGeom();r!==null&&t.push(r)}return t}},Vr=class{rings;polys;constructor(e){this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let t=0,n=this.polys.length;t<n;t++){const i=this.polys[t].getGeom();i!==null&&e.push(i)}return e}_composePolys(e){const t=[];for(let n=0,i=e.length;n<i;n++){const r=e[n];if(!r.poly)if(r.isExteriorRing())t.push(new Qn(r));else{const s=r.enclosingRing();s?.poly||t.push(new Qn(s)),s?.poly?.addInterior(r)}}return t}},Yr=class{queue;tree;segments;constructor(e,t=_e.compare){this.queue=e,this.tree=new Ee(t),this.segments=[]}process(e){const t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(t),n;e.isLeft&&this.tree.add(t);let i=t,r=t;do i=this.tree.lastBefore(i);while(i!=null&&i.consumedBy!=null);do r=this.tree.firstAfter(r);while(r!=null&&r.consumedBy!=null);if(e.isLeft){let s=null;if(i){const l=i.getIntersection(t);if(l!==null&&(t.isAnEndpoint(l)||(s=l),!i.isAnEndpoint(l))){const c=this._splitSafely(i,l);for(let f=0,a=c.length;f<a;f++)n.push(c[f])}}let o=null;if(r){const l=r.getIntersection(t);if(l!==null&&(t.isAnEndpoint(l)||(o=l),!r.isAnEndpoint(l))){const c=this._splitSafely(r,l);for(let f=0,a=c.length;f<a;f++)n.push(c[f])}}if(s!==null||o!==null){let l=null;s===null?l=o:o===null?l=s:l=St.comparePoints(s,o)<=0?s:o,this.queue.delete(t.rightSE),n.push(t.rightSE);const c=t.split(l);for(let f=0,a=c.length;f<a;f++)n.push(c[f])}n.length>0?(this.tree.delete(t),n.push(e)):(this.segments.push(t),t.prev=i)}else{if(i&&r){const s=i.getIntersection(r);if(s!==null){if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let l=0,c=o.length;l<c;l++)n.push(o[l])}if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let l=0,c=o.length;l<c;l++)n.push(o[l])}}}this.tree.delete(t)}return n}_splitSafely(e,t){this.tree.delete(e);const n=e.rightSE;this.queue.delete(n);const i=e.split(t);return i.push(n),e.consumedBy===void 0&&this.tree.add(e),i}},Hr=class{type;numMultiPolys;run(e,t,n){Wt.type=e;const i=[new ti(t,!0)];for(let f=0,a=n.length;f<a;f++)i.push(new ti(n[f],!1));if(Wt.numMultiPolys=i.length,Wt.type==="difference"){const f=i[0];let a=1;for(;a<i.length;)nn(i[a].bbox,f.bbox)!==null?a++:i.splice(a,1)}if(Wt.type==="intersection")for(let f=0,a=i.length;f<a;f++){const u=i[f];for(let g=f+1,v=i.length;g<v;g++)if(nn(u.bbox,i[g].bbox)===null)return[]}const r=new Ee(St.compare);for(let f=0,a=i.length;f<a;f++){const u=i[f].getSweepEvents();for(let g=0,v=u.length;g<v;g++)r.add(u[g])}const s=new Yr(r);let o=null;for(r.size!=0&&(o=r.first(),r.delete(o));o;){const f=s.process(o);for(let a=0,u=f.length;a<u;a++){const g=f[a];g.consumedBy===void 0&&r.add(g)}r.size!=0?(o=r.first(),r.delete(o)):o=null}Rt.reset();const l=Kr.factory(s.segments);return new Vr(l).getGeom()}},Wt=new Hr,qt=Wt,jr=0,_e=class de{id;leftSE;rightSE;rings;windings;ringOut;consumedBy;prev;_prevInResult;_beforeState;_afterState;_isInResult;static compare(t,n){const i=t.leftSE.point.x,r=n.leftSE.point.x,s=t.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(i))return 1;if(s.isLessThan(r))return-1;const l=t.leftSE.point.y,c=n.leftSE.point.y,f=t.rightSE.point.y,a=n.rightSE.point.y;if(i.isLessThan(r)){if(c.isLessThan(l)&&c.isLessThan(f))return 1;if(c.isGreaterThan(l)&&c.isGreaterThan(f))return-1;const u=t.comparePoint(n.leftSE.point);if(u<0)return 1;if(u>0)return-1;const g=n.comparePoint(t.rightSE.point);return g!==0?g:-1}if(i.isGreaterThan(r)){if(l.isLessThan(c)&&l.isLessThan(a))return-1;if(l.isGreaterThan(c)&&l.isGreaterThan(a))return 1;const u=n.comparePoint(t.leftSE.point);if(u!==0)return u;const g=t.comparePoint(n.rightSE.point);return g<0?1:g>0?-1:1}if(l.isLessThan(c))return-1;if(l.isGreaterThan(c))return 1;if(s.isLessThan(o)){const u=n.comparePoint(t.rightSE.point);if(u!==0)return u}if(s.isGreaterThan(o)){const u=t.comparePoint(n.rightSE.point);if(u<0)return 1;if(u>0)return-1}if(!s.eq(o)){const u=f.minus(l),g=s.minus(i),v=a.minus(c),S=o.minus(r);if(u.isGreaterThan(g)&&v.isLessThan(S))return 1;if(u.isLessThan(g)&&v.isGreaterThan(S))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||f.isLessThan(a)?-1:f.isGreaterThan(a)?1:t.id<n.id?-1:t.id>n.id?1:0}constructor(t,n,i,r){this.id=++jr,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=i,this.windings=r}static fromRing(t,n,i){let r,s,o;const l=St.comparePoints(t,n);if(l<0)r=t,s=n,o=1;else if(l>0)r=n,s=t,o=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const c=new St(r,!0),f=new St(s,!1);return new de(c,f,[i],[o])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t.isLessThan(n)?t:n},ur:{x:this.rightSE.point.x,y:t.isGreaterThan(n)?t:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(t){return t.x.eq(this.leftSE.point.x)&&t.y.eq(this.leftSE.point.y)||t.x.eq(this.rightSE.point.x)&&t.y.eq(this.rightSE.point.y)}comparePoint(t){return Rt.orient(this.leftSE.point,t,this.rightSE.point)}getIntersection(t){const n=this.bbox(),i=t.bbox(),r=nn(n,i);if(r===null)return null;const s=this.leftSE.point,o=this.rightSE.point,l=t.leftSE.point,c=t.rightSE.point,f=Yt(n,l)&&this.comparePoint(l)===0,a=Yt(i,s)&&t.comparePoint(s)===0,u=Yt(n,c)&&this.comparePoint(c)===0,g=Yt(i,o)&&t.comparePoint(o)===0;if(a&&f)return g&&!u?o:!g&&u?c:null;if(a)return u&&s.x.eq(c.x)&&s.y.eq(c.y)?null:s;if(f)return g&&o.x.eq(l.x)&&o.y.eq(l.y)?null:l;if(g&&u)return null;if(g)return o;if(u)return c;const v=Xr(s,this.vector(),l,t.vector());return v===null||!Yt(r,v)?null:Rt.snap(v)}split(t){const n=[],i=t.events!==void 0,r=new St(t,!0),s=new St(t,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(r);const l=new de(r,o,this.rings.slice(),this.windings.slice());return St.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),St.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,i=this.windings.length;n<i;n++)this.windings[n]*=-1}consume(t){let n=this,i=t;for(;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;const r=de.compare(n,i);if(r!==0){if(r>0){const s=n;n=i,i=s}if(n.prev===i){const s=n;n=i,i=s}for(let s=0,o=i.rings.length;s<o;s++){const l=i.rings[s],c=i.windings[s],f=n.rings.indexOf(l);f===-1?(n.rings.push(l),n.windings.push(c)):n.windings[f]+=c}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,i=this._afterState.windings,r=this._afterState.multiPolys;for(let l=0,c=this.rings.length;l<c;l++){const f=this.rings[l],a=this.windings[l],u=n.indexOf(f);u===-1?(n.push(f),i.push(a)):i[u]+=a}const s=[],o=[];for(let l=0,c=n.length;l<c;l++){if(i[l]===0)continue;const f=n[l],a=f.poly;if(o.indexOf(a)===-1)if(f.isExterior)s.push(a);else{o.indexOf(a)===-1&&o.push(a);const u=s.indexOf(f.poly);u!==-1&&s.splice(u,1)}}for(let l=0,c=s.length;l<c;l++){const f=s[l].multiPoly;r.indexOf(f)===-1&&r.push(f)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(qt.type){case"union":{const i=t.length===0,r=n.length===0;this._isInResult=i!==r;break}case"intersection":{let i,r;t.length<n.length?(i=t.length,r=n.length):(i=n.length,r=t.length),this._isInResult=r===qt.numMultiPolys&&i<r;break}case"xor":{const i=Math.abs(t.length-n.length);this._isInResult=i%2===1;break}case"difference":{const i=r=>r.length===1&&r[0].isSubject;this._isInResult=i(t)!==i(n);break}}return this._isInResult}},Jn=class{poly;isExterior;segments;bbox;constructor(e,t,n){if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=n,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=Rt.snap({x:new Mt(e[0][0]),y:new Mt(e[0][1])});this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let r=i;for(let s=1,o=e.length;s<o;s++){if(typeof e[s][0]!="number"||typeof e[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const l=Rt.snap({x:new Mt(e[s][0]),y:new Mt(e[s][1])});l.x.eq(r.x)&&l.y.eq(r.y)||(this.segments.push(_e.fromRing(r,l,this)),l.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=l.x),l.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=l.y),l.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=l.x),l.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=l.y),r=l)}(!i.x.eq(r.x)||!i.y.eq(r.y))&&this.segments.push(_e.fromRing(r,i,this))}getSweepEvents(){const e=[];for(let t=0,n=this.segments.length;t<n;t++){const i=this.segments[t];e.push(i.leftSE),e.push(i.rightSE)}return e}},Wr=class{multiPoly;exteriorRing;interiorRings;bbox;constructor(e,t){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Jn(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,i=e.length;n<i;n++){const r=new Jn(e[n],this,!1);r.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=r.bbox.ur.y),this.interiorRings.push(r)}this.multiPoly=t}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let t=0,n=this.interiorRings.length;t<n;t++){const i=this.interiorRings[t].getSweepEvents();for(let r=0,s=i.length;r<s;r++)e.push(i[r])}return e}},ti=class{isSubject;polys;bbox;constructor(e,t){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:new Mt(Number.POSITIVE_INFINITY),y:new Mt(Number.POSITIVE_INFINITY)},ur:{x:new Mt(Number.NEGATIVE_INFINITY),y:new Mt(Number.NEGATIVE_INFINITY)}};for(let n=0,i=e.length;n<i;n++){const r=new Wr(e[n],this);r.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=r.bbox.ur.y),this.polys.push(r)}this.isSubject=t}getSweepEvents(){const e=[];for(let t=0,n=this.polys.length;t<n;t++){const i=this.polys[t].getSweepEvents();for(let r=0,s=i.length;r<s;r++)e.push(i[r])}return e}},zt=(e,...t)=>qt.run("union",e,t),Zr=(e,...t)=>qt.run("intersection",e,t),Qr=(e,...t)=>qt.run("xor",e,t),Jr=(e,...t)=>qt.run("difference",e,t),ts=Rt.set;const es=Object.freeze(Object.defineProperty({__proto__:null,difference:Jr,intersection:Zr,setPrecision:ts,union:zt,xor:Qr},Symbol.toStringTag,{value:"Module"}));function ns(e,t,n){var i;const r=(i=n?.mutate)!=null?i:!1;let s=t;t&&r===!1&&(s=Tn(t));const o=rs(s);let l=null;return e.type==="FeatureCollection"?l=is(e):e.type==="Feature"?l=sn(zt(e.geometry.coordinates)):l=sn(zt(e.coordinates)),l.geometry.coordinates.forEach(function(c){o.geometry.coordinates.push(c[0])}),o}function is(e){const t=e.features.length===2?zt(e.features[0].geometry.coordinates,e.features[1].geometry.coordinates):zt.apply(es,e.features.map(function(n){return n.geometry.coordinates}));return sn(t)}function sn(e){return xe(e)}function rs(e){let n=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]];return e&&(e.type==="Feature"?n=e.geometry.coordinates:n=e.coordinates),Ki(n)}function ss(e,t={}){return Qi(e,"mercator",t)}function os(e,t={}){return Qi(e,"wgs84",t)}function Qi(e,t,n={}){n=n||{};var i=n.mutate;if(!e)throw new Error("geojson is required");return Array.isArray(e)&&Er(e[0])?e=t==="mercator"?ei(e):ni(e):(i!==!0&&(e=Tn(e)),Pn(e,function(r){var s=t==="mercator"?ei(r):ni(r);r[0]=s[0],r[1]=s[1]})),e}function ei(e){var t=Math.PI/180,n=6378137,i=20037508342789244e-9,r=Math.abs(e[0])<=180?e[0]:e[0]-ls(e[0])*360,s=[n*r*t,n*Math.log(Math.tan(Math.PI*.25+.5*e[1]*t))];return s[0]>i&&(s[0]=i),s[0]<-20037508342789244e-9&&(s[0]=-20037508342789244e-9),s[1]>i&&(s[1]=i),s[1]<-20037508342789244e-9&&(s[1]=-20037508342789244e-9),s}function ni(e){var t=180/Math.PI,n=6378137;return[e[0]*t/n,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/n)))*t]}function ls(e){return e<0?-1:e>0?1:0}function us(e,t){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function fs(e,t,n){var i=t[0],r=t[1],s=n[0]-i,o=n[1]-r;if(s!==0||o!==0){var l=((e[0]-i)*s+(e[1]-r)*o)/(s*s+o*o);l>1?(i=n[0],r=n[1]):l>0&&(i+=s*l,r+=o*l)}return s=e[0]-i,o=e[1]-r,s*s+o*o}function cs(e,t){for(var n=e[0],i=[n],r,s=1,o=e.length;s<o;s++)r=e[s],us(r,n)>t&&(i.push(r),n=r);return n!==r&&i.push(r),i}function on(e,t,n,i,r){for(var s=i,o,l=t+1;l<n;l++){var c=fs(e[l],e[t],e[n]);c>s&&(o=l,s=c)}s>i&&(o-t>1&&on(e,t,o,i,r),r.push(e[o]),n-o>1&&on(e,o,n,i,r))}function as(e,t){var n=e.length-1,i=[e[0]];return on(e,0,n,t,i),i.push(e[n]),i}function Me(e,t,n){if(e.length<=2)return e;var i=t!==void 0?t*t:1;return e=n?e:cs(e,i),e=as(e,i),e}function tl(e,t={}){var n,i,r;if(t=t??{},!Sr(t))throw new Error("options is invalid");const s=(n=t.tolerance)!=null?n:1,o=(i=t.highQuality)!=null?i:!1,l=(r=t.mutate)!=null?r:!1;if(!e)throw new Error("geojson is required");if(s&&s<0)throw new Error("invalid tolerance");return l!==!0&&(e=Tn(e)),Vi(e,function(c){hs(c,s,o)}),e}function hs(e,t,n){const i=e.type;if(i==="Point"||i==="MultiPoint")return e;if(Or(e,{mutate:!0}),i!=="GeometryCollection")switch(i){case"LineString":e.coordinates=Me(e.coordinates,t,n);break;case"MultiLineString":e.coordinates=e.coordinates.map(r=>Me(r,t,n));break;case"Polygon":e.coordinates=ii(e.coordinates,t,n);break;case"MultiPolygon":e.coordinates=e.coordinates.map(r=>ii(r,t,n))}return e}function ii(e,t,n){return e.map(function(i){if(i.length<4)throw new Error("invalid polygon");let r=t,s=Me(i,r,n);for(;!gs(s);)r-=r*.01,s=Me(i,r,n);return(s[s.length-1][0]!==s[0][0]||s[s.length-1][1]!==s[0][1])&&s.push(s[0]),s})}function gs(e){return e.length<3?!1:!(e.length===3&&e[2][0]===e[0][0]&&e[2][1]===e[0][1])}function Ji(e,t={}){const n=[];if(Vi(e,r=>{n.push(r.coordinates)}),n.length<2)throw new Error("Must have at least 2 geometries");const i=zt(n[0],...n.slice(1));return i.length===0?null:i.length===1?Ki(i[0],t.properties):xe(i,t.properties)}function tr(e,t){let n,i;for(const r of e)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));return[n,i]}class Qt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],o=t+s,l=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);l&&(n[i++]=l),t=o}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,s,o=0;if(n>0){for(o=t[--n];n>0&&(i=o,r=t[--n],o=i+r,s=r-(o-i),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}function*ps(e){for(const t of e)yield*t}function er(e){return Array.from(ps(e))}var Y=1e-6,ri=1e-12,U=Math.PI,ct=U/2,si=U/4,mt=U*2,st=180/U,X=U/180,W=Math.abs,bn=Math.atan,At=Math.atan2,z=Math.cos,ds=Math.exp,ln=Math.hypot,ys=Math.log,D=Math.sin,vs=Math.sign||function(e){return e>0?1:e<0?-1:0},kt=Math.sqrt,ms=Math.tan;function ws(e){return e>1?0:e<-1?U:Math.acos(e)}function Nt(e){return e>1?ct:e<-1?-ct:Math.asin(e)}function vt(){}function Pe(e,t){e&&li.hasOwnProperty(e.type)&&li[e.type](e,t)}var oi={Feature:function(e,t){Pe(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Pe(n[i].geometry,t)}},li={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){un(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)un(n[i],t,0)},Polygon:function(e,t){ui(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)ui(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Pe(n[i],t)}};function un(e,t,n){var i=-1,r=e.length-n,s;for(t.lineStart();++i<r;)s=e[i],t.point(s[0],s[1],s[2]);t.lineEnd()}function ui(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)un(e[n],t,1);t.polygonEnd()}function Ge(e,t){e&&oi.hasOwnProperty(e.type)?oi[e.type](e,t):Pe(e,t)}function fn(e){return[At(e[1],e[0]),Nt(e[2])]}function Dt(e){var t=e[0],n=e[1],i=z(n);return[i*z(t),i*D(t),D(n)]}function oe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Te(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function He(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function le(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function cn(e){var t=kt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Zt,be,Ie,Re,Ae,Le,Ne,Oe,an,hn,gn,nr,ir,ot,lt,ut,xt={sphere:vt,point:In,lineStart:fi,lineEnd:ci,polygonStart:function(){xt.lineStart=Ss,xt.lineEnd=_s},polygonEnd:function(){xt.lineStart=fi,xt.lineEnd=ci}};function In(e,t){e*=X,t*=X;var n=z(t);ee(n*z(e),n*D(e),D(t))}function ee(e,t,n){++Zt,Ie+=(e-Ie)/Zt,Re+=(t-Re)/Zt,Ae+=(n-Ae)/Zt}function fi(){xt.point=xs}function xs(e,t){e*=X,t*=X;var n=z(t);ot=n*z(e),lt=n*D(e),ut=D(t),xt.point=Es,ee(ot,lt,ut)}function Es(e,t){e*=X,t*=X;var n=z(t),i=n*z(e),r=n*D(e),s=D(t),o=At(kt((o=lt*s-ut*r)*o+(o=ut*i-ot*s)*o+(o=ot*r-lt*i)*o),ot*i+lt*r+ut*s);be+=o,Le+=o*(ot+(ot=i)),Ne+=o*(lt+(lt=r)),Oe+=o*(ut+(ut=s)),ee(ot,lt,ut)}function ci(){xt.point=In}function Ss(){xt.point=Ms}function _s(){rr(nr,ir),xt.point=In}function Ms(e,t){nr=e,ir=t,e*=X,t*=X,xt.point=rr;var n=z(t);ot=n*z(e),lt=n*D(e),ut=D(t),ee(ot,lt,ut)}function rr(e,t){e*=X,t*=X;var n=z(t),i=n*z(e),r=n*D(e),s=D(t),o=lt*s-ut*r,l=ut*i-ot*s,c=ot*r-lt*i,f=ln(o,l,c),a=Nt(f),u=f&&-a/f;an.add(u*o),hn.add(u*l),gn.add(u*c),be+=a,Le+=a*(ot+(ot=i)),Ne+=a*(lt+(lt=r)),Oe+=a*(ut+(ut=s)),ee(ot,lt,ut)}function ai(e){Zt=be=Ie=Re=Ae=Le=Ne=Oe=0,an=new Qt,hn=new Qt,gn=new Qt,Ge(e,xt);var t=+an,n=+hn,i=+gn,r=ln(t,n,i);return r<ri&&(t=Le,n=Ne,i=Oe,be<Y&&(t=Ie,n=Re,i=Ae),r=ln(t,n,i),r<ri)?[NaN,NaN]:[At(n,t)*st,Nt(i/r)*st]}function pn(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function dn(e,t){return W(e)>U&&(e-=Math.round(e/mt)*mt),[e,t]}dn.invert=dn;function sr(e,t,n){return(e%=mt)?t||n?pn(gi(e),pi(t,n)):gi(e):t||n?pi(t,n):dn}function hi(e){return function(t,n){return t+=e,W(t)>U&&(t-=Math.round(t/mt)*mt),[t,n]}}function gi(e){var t=hi(e);return t.invert=hi(-e),t}function pi(e,t){var n=z(e),i=D(e),r=z(t),s=D(t);function o(l,c){var f=z(c),a=z(l)*f,u=D(l)*f,g=D(c),v=g*n+a*i;return[At(u*r-v*s,a*n-g*i),Nt(v*r+u*s)]}return o.invert=function(l,c){var f=z(c),a=z(l)*f,u=D(l)*f,g=D(c),v=g*r-u*s;return[At(u*r+g*s,a*n+v*i),Nt(v*n-a*i)]},o}function or(e){e=sr(e[0]*X,e[1]*X,e.length>2?e[2]*X:0);function t(n){return n=e(n[0]*X,n[1]*X),n[0]*=st,n[1]*=st,n}return t.invert=function(n){return n=e.invert(n[0]*X,n[1]*X),n[0]*=st,n[1]*=st,n},t}function Ps(e,t,n,i,r,s){if(n){var o=z(t),l=D(t),c=i*n;r==null?(r=t+i*mt,s=t-c/2):(r=di(o,r),s=di(o,s),(i>0?r<s:r>s)&&(r+=i*mt));for(var f,a=r;i>0?a>s:a<s;a-=c)f=fn([o,-l*z(a),-l*D(a)]),e.point(f[0],f[1])}}function di(e,t){t=Dt(t),t[0]-=e,cn(t);var n=ws(-t[1]);return((-t[2]<0?-n:n)+mt-Y)%mt}function lr(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:vt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ye(e,t){return W(e[0]-t[0])<Y&&W(e[1]-t[1])<Y}function ue(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ur(e,t,n,i,r){var s=[],o=[],l,c;if(e.forEach(function(S){if(!((T=S.length-1)<=0)){var T,I=S[0],R=S[T],_;if(ye(I,R)){if(!I[2]&&!R[2]){for(r.lineStart(),l=0;l<T;++l)r.point((I=S[l])[0],I[1]);r.lineEnd();return}R[0]+=2*Y}s.push(_=new ue(I,S,null,!0)),o.push(_.o=new ue(I,null,_,!1)),s.push(_=new ue(R,S,null,!1)),o.push(_.o=new ue(R,null,_,!0))}}),!!s.length){for(o.sort(t),yi(s),yi(o),l=0,c=o.length;l<c;++l)o[l].e=n=!n;for(var f=s[0],a,u;;){for(var g=f,v=!0;g.v;)if((g=g.n)===f)return;a=g.z,r.lineStart();do{if(g.v=g.o.v=!0,g.e){if(v)for(l=0,c=a.length;l<c;++l)r.point((u=a[l])[0],u[1]);else i(g.x,g.n.x,1,r);g=g.n}else{if(v)for(a=g.p.z,l=a.length-1;l>=0;--l)r.point((u=a[l])[0],u[1]);else i(g.x,g.p.x,-1,r);g=g.p}g=g.o,a=g.z,v=!v}while(!g.v);r.lineEnd()}}}function yi(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function je(e){return W(e[0])<=U?e[0]:vs(e[0])*((W(e[0])+U)%mt-U)}function Ts(e,t){var n=je(t),i=t[1],r=D(i),s=[D(n),-z(n),0],o=0,l=0,c=new Qt;r===1?i=ct+Y:r===-1&&(i=-ct-Y);for(var f=0,a=e.length;f<a;++f)if(g=(u=e[f]).length)for(var u,g,v=u[g-1],S=je(v),T=v[1]/2+si,I=D(T),R=z(T),_=0;_<g;++_,S=L,I=O,R=k,v=N){var N=u[_],L=je(N),C=N[1]/2+si,O=D(C),k=z(C),h=L-S,p=h>=0?1:-1,y=p*h,m=y>U,x=I*O;if(c.add(At(x*p*D(y),R*k+x*z(y))),o+=m?h+p*mt:h,m^S>=n^L>=n){var E=Te(Dt(v),Dt(N));cn(E);var M=Te(s,E);cn(M);var d=(m^h>=0?-1:1)*Nt(M[2]);(i>d||i===d&&(E[0]||E[1]))&&(l+=m^h>=0?1:-1)}}return(o<-1e-6||o<Y&&c<-1e-12)^l&1}function fr(e,t,n,i){return function(r){var s=t(r),o=lr(),l=t(o),c=!1,f,a,u,g={point:v,lineStart:T,lineEnd:I,polygonStart:function(){g.point=R,g.lineStart=_,g.lineEnd=N,a=[],f=[]},polygonEnd:function(){g.point=v,g.lineStart=T,g.lineEnd=I,a=er(a);var L=Ts(f,i);a.length?(c||(r.polygonStart(),c=!0),ur(a,Is,L,n,r)):L&&(c||(r.polygonStart(),c=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),c&&(r.polygonEnd(),c=!1),a=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function v(L,C){e(L,C)&&r.point(L,C)}function S(L,C){s.point(L,C)}function T(){g.point=S,s.lineStart()}function I(){g.point=v,s.lineEnd()}function R(L,C){u.push([L,C]),l.point(L,C)}function _(){l.lineStart(),u=[]}function N(){R(u[0][0],u[0][1]),l.lineEnd();var L=l.clean(),C=o.result(),O,k=C.length,h,p,y;if(u.pop(),f.push(u),u=null,!!k){if(L&1){if(p=C[0],(h=p.length-1)>0){for(c||(r.polygonStart(),c=!0),r.lineStart(),O=0;O<h;++O)r.point((y=p[O])[0],y[1]);r.lineEnd()}return}k>1&&L&2&&C.push(C.pop().concat(C.shift())),a.push(C.filter(bs))}}return g}}function bs(e){return e.length>1}function Is(e,t){return((e=e.x)[0]<0?e[1]-ct-Y:ct-e[1])-((t=t.x)[0]<0?t[1]-ct-Y:ct-t[1])}const vi=fr(function(){return!0},Rs,Ls,[-U,-ct]);function Rs(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(s,o){var l=s>0?U:-U,c=W(s-t);W(c-U)<Y?(e.point(t,n=(n+o)/2>0?ct:-ct),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(s,n),r=0):i!==l&&c>=U&&(W(t-i)<Y&&(t-=i*Y),W(s-l)<Y&&(s-=l*Y),n=As(t,n,s,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(l,n),r=0),e.point(t=s,n=o),i=l},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function As(e,t,n,i){var r,s,o=D(e-n);return W(o)>Y?bn((D(t)*(s=z(i))*D(n)-D(i)*(r=z(t))*D(e))/(r*s*o)):(t+i)/2}function Ls(e,t,n,i){var r;if(e==null)r=n*ct,i.point(-U,r),i.point(0,r),i.point(U,r),i.point(U,0),i.point(U,-r),i.point(0,-r),i.point(-U,-r),i.point(-U,0),i.point(-U,r);else if(W(e[0]-t[0])>Y){var s=e[0]<t[0]?U:-U;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function Ns(e){var t=z(e),n=2*X,i=t>0,r=W(t)>Y;function s(a,u,g,v){Ps(v,e,n,g,a,u)}function o(a,u){return z(a)*z(u)>t}function l(a){var u,g,v,S,T;return{lineStart:function(){S=v=!1,T=1},point:function(I,R){var _=[I,R],N,L=o(I,R),C=i?L?0:f(I,R):L?f(I+(I<0?U:-U),R):0;if(!u&&(S=v=L)&&a.lineStart(),L!==v&&(N=c(u,_),(!N||ye(u,N)||ye(_,N))&&(_[2]=1)),L!==v)T=0,L?(a.lineStart(),N=c(_,u),a.point(N[0],N[1])):(N=c(u,_),a.point(N[0],N[1],2),a.lineEnd()),u=N;else if(r&&u&&i^L){var O;!(C&g)&&(O=c(_,u,!0))&&(T=0,i?(a.lineStart(),a.point(O[0][0],O[0][1]),a.point(O[1][0],O[1][1]),a.lineEnd()):(a.point(O[1][0],O[1][1]),a.lineEnd(),a.lineStart(),a.point(O[0][0],O[0][1],3)))}L&&(!u||!ye(u,_))&&a.point(_[0],_[1]),u=_,v=L,g=C},lineEnd:function(){v&&a.lineEnd(),u=null},clean:function(){return T|(S&&v)<<1}}}function c(a,u,g){var v=Dt(a),S=Dt(u),T=[1,0,0],I=Te(v,S),R=oe(I,I),_=I[0],N=R-_*_;if(!N)return!g&&a;var L=t*R/N,C=-t*_/N,O=Te(T,I),k=le(T,L),h=le(I,C);He(k,h);var p=O,y=oe(k,p),m=oe(p,p),x=y*y-m*(oe(k,k)-1);if(!(x<0)){var E=kt(x),M=le(p,(-y-E)/m);if(He(M,k),M=fn(M),!g)return M;var d=a[0],w=u[0],P=a[1],b=u[1],A;w<d&&(A=d,d=w,w=A);var $=w-d,B=W($-U)<Y,G=B||$<Y;if(!B&&b<P&&(A=P,P=b,b=A),G?B?P+b>0^M[1]<(W(M[0]-d)<Y?P:b):P<=M[1]&&M[1]<=b:$>U^(d<=M[0]&&M[0]<=w)){var K=le(p,(-y+E)/m);return He(K,k),[M,fn(K)]}}}function f(a,u){var g=i?e:U-e,v=0;return a<-g?v|=1:a>g&&(v|=2),u<-g?v|=4:u>g&&(v|=8),v}return fr(o,l,s,i?[0,-e]:[-U,e-U])}function Os(e,t,n,i,r,s){var o=e[0],l=e[1],c=t[0],f=t[1],a=0,u=1,g=c-o,v=f-l,S;if(S=n-o,!(!g&&S>0)){if(S/=g,g<0){if(S<a)return;S<u&&(u=S)}else if(g>0){if(S>u)return;S>a&&(a=S)}if(S=r-o,!(!g&&S<0)){if(S/=g,g<0){if(S>u)return;S>a&&(a=S)}else if(g>0){if(S<a)return;S<u&&(u=S)}if(S=i-l,!(!v&&S>0)){if(S/=v,v<0){if(S<a)return;S<u&&(u=S)}else if(v>0){if(S>u)return;S>a&&(a=S)}if(S=s-l,!(!v&&S<0)){if(S/=v,v<0){if(S>u)return;S>a&&(a=S)}else if(v>0){if(S<a)return;S<u&&(u=S)}return a>0&&(e[0]=o+a*g,e[1]=l+a*v),u<1&&(t[0]=o+u*g,t[1]=l+u*v),!0}}}}}var fe=1e9,ce=-1e9;function Cs(e,t,n,i){function r(f,a){return e<=f&&f<=n&&t<=a&&a<=i}function s(f,a,u,g){var v=0,S=0;if(f==null||(v=o(f,u))!==(S=o(a,u))||c(f,a)<0^u>0)do g.point(v===0||v===3?e:n,v>1?i:t);while((v=(v+u+4)%4)!==S);else g.point(a[0],a[1])}function o(f,a){return W(f[0]-e)<Y?a>0?0:3:W(f[0]-n)<Y?a>0?2:1:W(f[1]-t)<Y?a>0?1:0:a>0?3:2}function l(f,a){return c(f.x,a.x)}function c(f,a){var u=o(f,1),g=o(a,1);return u!==g?u-g:u===0?a[1]-f[1]:u===1?f[0]-a[0]:u===2?f[1]-a[1]:a[0]-f[0]}return function(f){var a=f,u=lr(),g,v,S,T,I,R,_,N,L,C,O,k={point:h,lineStart:x,lineEnd:E,polygonStart:y,polygonEnd:m};function h(d,w){r(d,w)&&a.point(d,w)}function p(){for(var d=0,w=0,P=v.length;w<P;++w)for(var b=v[w],A=1,$=b.length,B=b[0],G,K,H=B[0],q=B[1];A<$;++A)G=H,K=q,B=b[A],H=B[0],q=B[1],K<=i?q>i&&(H-G)*(i-K)>(q-K)*(e-G)&&++d:q<=i&&(H-G)*(i-K)<(q-K)*(e-G)&&--d;return d}function y(){a=u,g=[],v=[],O=!0}function m(){var d=p(),w=O&&d,P=(g=er(g)).length;(w||P)&&(f.polygonStart(),w&&(f.lineStart(),s(null,null,1,f),f.lineEnd()),P&&ur(g,l,d,s,f),f.polygonEnd()),a=f,g=v=S=null}function x(){k.point=M,v&&v.push(S=[]),C=!0,L=!1,_=N=NaN}function E(){g&&(M(T,I),R&&L&&u.rejoin(),g.push(u.result())),k.point=h,L&&a.lineEnd()}function M(d,w){var P=r(d,w);if(v&&S.push([d,w]),C)T=d,I=w,R=P,C=!1,P&&(a.lineStart(),a.point(d,w));else if(P&&L)a.point(d,w);else{var b=[_=Math.max(ce,Math.min(fe,_)),N=Math.max(ce,Math.min(fe,N))],A=[d=Math.max(ce,Math.min(fe,d)),w=Math.max(ce,Math.min(fe,w))];Os(b,A,e,t,n,i)?(L||(a.lineStart(),a.point(b[0],b[1])),a.point(A[0],A[1]),P||a.lineEnd(),O=!1):P&&(a.lineStart(),a.point(d,w),O=!1)}_=d,N=w,L=P}return k}}var yn,vn,ve,me,Ut={sphere:vt,point:vt,lineStart:ks,lineEnd:vt,polygonStart:vt,polygonEnd:vt};function ks(){Ut.point=Bs,Ut.lineEnd=$s}function $s(){Ut.point=Ut.lineEnd=vt}function Bs(e,t){e*=X,t*=X,vn=e,ve=D(t),me=z(t),Ut.point=Fs}function Fs(e,t){e*=X,t*=X;var n=D(t),i=z(t),r=W(e-vn),s=z(r),o=D(r),l=i*o,c=me*n-ve*i*s,f=ve*n+me*i*s;yn.add(At(kt(l*l+c*c),f)),vn=e,ve=n,me=i}function Gs(e){return yn=new Qt,Ge(e,Ut),+yn}var mn=[null,null],qs={type:"LineString",coordinates:mn};function mi(e,t){return mn[0]=e,mn[1]=t,Gs(qs)}const wi=e=>e;var Xt=1/0,Ce=Xt,Jt=-Xt,ke=Jt,xi={point:zs,lineStart:vt,lineEnd:vt,polygonStart:vt,polygonEnd:vt,result:function(){var e=[[Xt,Ce],[Jt,ke]];return Jt=ke=-(Ce=Xt=1/0),e}};function zs(e,t){e<Xt&&(Xt=e),e>Jt&&(Jt=e),t<Ce&&(Ce=t),t>ke&&(ke=t)}function Rn(e){return function(t){var n=new wn;for(var i in e)n[i]=e[i];return n.stream=t,n}}function wn(){}wn.prototype={constructor:wn,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function An(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Ge(n,e.stream(xi)),t(xi.result()),i!=null&&e.clipExtent(i),e}function cr(e,t,n){return An(e,function(i){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),l=+t[0][0]+(r-o*(i[1][0]+i[0][0]))/2,c=+t[0][1]+(s-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([l,c])},n)}function Ds(e,t,n){return cr(e,[[0,0],t],n)}function Us(e,t,n){return An(e,function(i){var r=+t,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,l=-s*i[0][1];e.scale(150*s).translate([o,l])},n)}function Xs(e,t,n){return An(e,function(i){var r=+t,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],l=(r-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,l])},n)}var Ei=16,Ks=z(30*X);function Si(e,t){return+t?Ys(e,t):Vs(e)}function Vs(e){return Rn({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Ys(e,t){function n(i,r,s,o,l,c,f,a,u,g,v,S,T,I){var R=f-i,_=a-r,N=R*R+_*_;if(N>4*t&&T--){var L=o+g,C=l+v,O=c+S,k=kt(L*L+C*C+O*O),h=Nt(O/=k),p=W(W(O)-1)<Y||W(s-u)<Y?(s+u)/2:At(C,L),y=e(p,h),m=y[0],x=y[1],E=m-i,M=x-r,d=_*E-R*M;(d*d/N>t||W((R*E+_*M)/N-.5)>.3||o*g+l*v+c*S<Ks)&&(n(i,r,s,o,l,c,m,x,p,L/=k,C/=k,O,T,I),I.point(m,x),n(m,x,p,L,C,O,f,a,u,g,v,S,T,I))}}return function(i){var r,s,o,l,c,f,a,u,g,v,S,T,I={point:R,lineStart:_,lineEnd:L,polygonStart:function(){i.polygonStart(),I.lineStart=C},polygonEnd:function(){i.polygonEnd(),I.lineStart=_}};function R(h,p){h=e(h,p),i.point(h[0],h[1])}function _(){u=NaN,I.point=N,i.lineStart()}function N(h,p){var y=Dt([h,p]),m=e(h,p);n(u,g,a,v,S,T,u=m[0],g=m[1],a=h,v=y[0],S=y[1],T=y[2],Ei,i),i.point(u,g)}function L(){I.point=R,i.lineEnd()}function C(){_(),I.point=O,I.lineEnd=k}function O(h,p){N(r=h,p),s=u,o=g,l=v,c=S,f=T,I.point=N}function k(){n(u,g,a,v,S,T,s,o,r,l,c,f,Ei,i),I.lineEnd=L,L()}return I}}var Hs=Rn({point:function(e,t){this.stream.point(e*X,t*X)}});function js(e){return Rn({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function Ws(e,t,n,i,r){function s(o,l){return o*=i,l*=r,[t+e*o,n-e*l]}return s.invert=function(o,l){return[(o-t)/e*i,(n-l)/e*r]},s}function _i(e,t,n,i,r,s){if(!s)return Ws(e,t,n,i,r);var o=z(s),l=D(s),c=o*e,f=l*e,a=o/e,u=l/e,g=(l*n-o*t)/e,v=(l*t+o*n)/e;function S(T,I){return T*=i,I*=r,[c*T-f*I+t,n-f*T-c*I]}return S.invert=function(T,I){return[i*(a*T-u*I+g),r*(v-u*T-a*I)]},S}function ar(e){return Zs(function(){return e})()}function Zs(e){var t,n=150,i=480,r=250,s=0,o=0,l=0,c=0,f=0,a,u=0,g=1,v=1,S=null,T=vi,I=null,R,_,N,L=wi,C=.5,O,k,h,p,y;function m(d){return h(d[0]*X,d[1]*X)}function x(d){return d=h.invert(d[0],d[1]),d&&[d[0]*st,d[1]*st]}m.stream=function(d){return p&&y===d?p:p=Hs(js(a)(T(O(L(y=d)))))},m.preclip=function(d){return arguments.length?(T=d,S=void 0,M()):T},m.postclip=function(d){return arguments.length?(L=d,I=R=_=N=null,M()):L},m.clipAngle=function(d){return arguments.length?(T=+d?Ns(S=d*X):(S=null,vi),M()):S*st},m.clipExtent=function(d){return arguments.length?(L=d==null?(I=R=_=N=null,wi):Cs(I=+d[0][0],R=+d[0][1],_=+d[1][0],N=+d[1][1]),M()):I==null?null:[[I,R],[_,N]]},m.scale=function(d){return arguments.length?(n=+d,E()):n},m.translate=function(d){return arguments.length?(i=+d[0],r=+d[1],E()):[i,r]},m.center=function(d){return arguments.length?(s=d[0]%360*X,o=d[1]%360*X,E()):[s*st,o*st]},m.rotate=function(d){return arguments.length?(l=d[0]%360*X,c=d[1]%360*X,f=d.length>2?d[2]%360*X:0,E()):[l*st,c*st,f*st]},m.angle=function(d){return arguments.length?(u=d%360*X,E()):u*st},m.reflectX=function(d){return arguments.length?(g=d?-1:1,E()):g<0},m.reflectY=function(d){return arguments.length?(v=d?-1:1,E()):v<0},m.precision=function(d){return arguments.length?(O=Si(k,C=d*d),M()):kt(C)},m.fitExtent=function(d,w){return cr(m,d,w)},m.fitSize=function(d,w){return Ds(m,d,w)},m.fitWidth=function(d,w){return Us(m,d,w)},m.fitHeight=function(d,w){return Xs(m,d,w)};function E(){var d=_i(n,0,0,g,v,u).apply(null,t(s,o)),w=_i(n,i-d[0],r-d[1],g,v,u);return a=sr(l,c,f),k=pn(t,w),h=pn(a,k),O=Si(k,C),M()}function M(){return p=y=null,m}return function(){return t=e.apply(this,arguments),m.invert=t.invert&&x,E()}}function Qs(e){return function(t,n){var i=kt(t*t+n*n),r=e(i),s=D(r),o=z(r);return[At(t*s,i*o),Nt(i&&n*s/i)]}}function Ln(e,t){return[e,ys(ms((ct+t)/2))]}Ln.invert=function(e,t){return[e,2*bn(ds(t))-ct]};function Js(){return to(Ln).scale(961/mt)}function to(e){var t=ar(e),n=t.center,i=t.scale,r=t.translate,s=t.clipExtent,o=null,l,c,f;t.scale=function(u){return arguments.length?(i(u),a()):i()},t.translate=function(u){return arguments.length?(r(u),a()):r()},t.center=function(u){return arguments.length?(n(u),a()):n()},t.clipExtent=function(u){return arguments.length?(u==null?o=l=c=f=null:(o=+u[0][0],l=+u[0][1],c=+u[1][0],f=+u[1][1]),a()):o==null?null:[[o,l],[c,f]]};function a(){var u=U*i(),g=t(or(t.rotate()).invert([0,0]));return s(o==null?[[g[0]-u,g[1]-u],[g[0]+u,g[1]+u]]:e===Ln?[[Math.max(g[0]-u,o),l],[Math.min(g[0]+u,c),f]]:[[o,Math.max(g[1]-u,l)],[c,Math.min(g[1]+u,f)]])}return a()}function hr(e,t){var n=z(t),i=1+z(e)*n;return[n*D(e)/i,D(t)/i]}hr.invert=Qs(function(e){return 2*bn(e)});function eo(){return ar(hr).scale(250).clipAngle(142)}const we=()=>{};function no(e){if((n=e.length)<4)return!1;for(var t=0,n,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i<=0}function io(e,t){for(var n=t[0],i=t[1],r=!1,s=0,o=e.length,l=o-1;s<o;l=s++){var c=e[s],f=c[0],a=c[1],u=e[l],g=u[0],v=u[1];a>i^v>i&&n<(g-f)*(i-a)/(v-a)+f&&(r=!r)}return r}function ro(e,t){var n=t.stream,i;if(!n)throw new Error("invalid projection");switch(e&&e.type){case"Feature":i=gr;break;case"FeatureCollection":i=so;break;default:i=Nn;break}return i(e,n)}function so(e,t){return{type:"FeatureCollection",features:e.features.map(function(n){return gr(n,t)})}}function gr(e,t){return{type:"Feature",id:e.id,properties:e.properties,geometry:Nn(e.geometry,t)}}function oo(e,t){return{type:"GeometryCollection",geometries:e.geometries.map(function(n){return Nn(n,t)})}}function Nn(e,t){if(!e)return null;if(e.type==="GeometryCollection")return oo(e,t);var n;switch(e.type){case"Point":n=Mi;break;case"MultiPoint":n=Mi;break;case"LineString":n=Pi;break;case"MultiLineString":n=Pi;break;case"Polygon":n=We;break;case"MultiPolygon":n=We;break;case"Sphere":n=We;break;default:return null}return Ge(e,t(n)),n.result()}var et=[],_t=[],Mi={point:function(e,t){et.push([e,t])},result:function(){var e=et.length?et.length<2?{type:"Point",coordinates:et[0]}:{type:"MultiPoint",coordinates:et}:null;return et=[],e}},Pi={lineStart:we,point:function(e,t){et.push([e,t])},lineEnd:function(){et.length&&(_t.push(et),et=[])},result:function(){var e=_t.length?_t.length<2?{type:"LineString",coordinates:_t[0]}:{type:"MultiLineString",coordinates:_t}:null;return _t=[],e}},We={polygonStart:we,lineStart:we,point:function(e,t){et.push([e,t])},lineEnd:function(){var e=et.length;if(e){do et.push(et[0].slice());while(++e<4);_t.push(et),et=[]}},polygonEnd:we,result:function(){if(!_t.length)return null;var e=[],t=[];return _t.forEach(function(n){no(n)?e.push([n]):t.push(n)}),t.forEach(function(n){var i=n[0];e.some(function(r){if(io(r[0],i))return r.push(n),!0})||e.push([n])}),_t=[],e.length?e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}:null}},qe=1e-4,Ti=1e4,On=-180,xn=On+qe,pr=180,En=pr-qe,Cn=-90,Sn=Cn+qe,kn=90,_n=kn-qe;function lo(e){return e.length>0}function uo(e){return Math.floor(e*Ti)/Ti}function bi(e){return e===Cn||e===kn?[0,e]:[On,uo(e)]}function $n(e){var t=e[0],n=e[1],i=!1;return t<=xn?(t=On,i=!0):t>=En&&(t=pr,i=!0),n<=Sn?(n=Cn,i=!0):n>=_n&&(n=kn,i=!0),i?[t,n]:e}function Ii(e){return e.map($n)}function Ri(e,t,n){for(var i=0,r=e.length;i<r;++i){var s=e[i].slice();n.push({index:-1,polygon:t,ring:s});for(var o=0,l=s.length;o<l;++o){var c=s[o],f=c[0],a=c[1];if(f<=xn||f>=En||a<=Sn||a>=_n){s[o]=$n(c);for(var u=o+1;u<l;++u){var g=s[u],v=g[0],S=g[1];if(v>xn&&v<En&&S>Sn&&S<_n)break}if(u===o+1)continue;if(o){var T={index:-1,polygon:t,ring:s.slice(0,o+1)};T.ring[T.ring.length-1]=bi(a),n[n.length-1]=T}else n.pop();if(u>=l)break;n.push({index:-1,polygon:t,ring:s=s.slice(u-1)}),s[0]=bi(s[0][1]),o=-1,l=s.length}}}}function Ai(e){var t,n=e.length,i={},r={},s,o,l,c,f;for(t=0;t<n;++t){if(s=e[t],o=s.ring[0],c=s.ring[s.ring.length-1],o[0]===c[0]&&o[1]===c[1]){s.polygon.push(s.ring),e[t]=null;continue}s.index=t,i[o]=r[c]=s}for(t=0;t<n;++t)if(s=e[t],s){if(o=s.ring[0],c=s.ring[s.ring.length-1],l=r[o],f=i[c],delete i[o],delete r[c],o[0]===c[0]&&o[1]===c[1]){s.polygon.push(s.ring);continue}l?(delete r[o],delete i[l.ring[0]],l.ring.pop(),e[l.index]=null,s={index:-1,polygon:l.polygon,ring:l.ring.concat(s.ring)},l===f?s.polygon.push(s.ring):(s.index=n++,e.push(i[s.ring[0]]=r[s.ring[s.ring.length-1]]=s))):f?(delete i[c],delete r[f.ring[f.ring.length-1]],s.ring.pop(),s={index:n++,polygon:f.polygon,ring:s.ring.concat(f.ring)},e[f.index]=null,e.push(i[s.ring[0]]=r[s.ring[s.ring.length-1]]=s)):(s.ring.push(s.ring[0]),s.polygon.push(s.ring))}}function Li(e){var t={type:"Feature",geometry:Bn(e.geometry)};return e.id!=null&&(t.id=e.id),e.bbox!=null&&(t.bbox=e.bbox),e.properties!=null&&(t.properties=e.properties),t}function Bn(e){if(e==null)return e;var t,n,i,r;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(Bn)};break;case"Point":t={type:"Point",coordinates:$n(e.coordinates)};break;case"MultiPoint":case"LineString":t={type:e.type,coordinates:Ii(e.coordinates)};break;case"MultiLineString":t={type:"MultiLineString",coordinates:e.coordinates.map(Ii)};break;case"Polygon":{var s=[];Ri(e.coordinates,s,n=[]),Ai(n),t={type:"Polygon",coordinates:s};break}case"MultiPolygon":{n=[],i=-1,r=e.coordinates.length;for(var o=new Array(r);++i<r;)Ri(e.coordinates[i],o[i]=[],n);Ai(n),t={type:"MultiPolygon",coordinates:o.filter(lo)};break}default:return e}return e.bbox!=null&&(t.bbox=e.bbox),t}function fo(e){if(e==null)return e;switch(e.type){case"Feature":return Li(e);case"FeatureCollection":{var t={type:"FeatureCollection",features:e.features.map(Li)};return e.bbox!=null&&(t.bbox=e.bbox),t}default:return Bn(e)}}const It=11102230246251565e-32,tt=134217729,co=(3+8*It)*It;function Ze(e,t,n,i,r){let s,o,l,c,f=t[0],a=i[0],u=0,g=0;a>f==a>-f?(s=f,f=t[++u]):(s=a,a=i[++g]);let v=0;if(u<e&&g<n)for(a>f==a>-f?(o=f+s,l=s-(o-f),f=t[++u]):(o=a+s,l=s-(o-a),a=i[++g]),s=o,l!==0&&(r[v++]=l);u<e&&g<n;)a>f==a>-f?(o=s+f,c=o-s,l=s-(o-c)+(f-c),f=t[++u]):(o=s+a,c=o-s,l=s-(o-c)+(a-c),a=i[++g]),s=o,l!==0&&(r[v++]=l);for(;u<e;)o=s+f,c=o-s,l=s-(o-c)+(f-c),f=t[++u],s=o,l!==0&&(r[v++]=l);for(;g<n;)o=s+a,c=o-s,l=s-(o-c)+(a-c),a=i[++g],s=o,l!==0&&(r[v++]=l);return(s!==0||v===0)&&(r[v++]=s),v}function ao(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function ne(e){return new Float64Array(e)}const ho=(3+16*It)*It,go=(2+12*It)*It,po=(9+64*It)*It*It,Bt=ne(4),Ni=ne(8),Oi=ne(12),Ci=ne(16),rt=ne(4);function yo(e,t,n,i,r,s,o){let l,c,f,a,u,g,v,S,T,I,R,_,N,L,C,O,k,h;const p=e-r,y=n-r,m=t-s,x=i-s;L=p*x,g=tt*p,v=g-(g-p),S=p-v,g=tt*x,T=g-(g-x),I=x-T,C=S*I-(L-v*T-S*T-v*I),O=m*y,g=tt*m,v=g-(g-m),S=m-v,g=tt*y,T=g-(g-y),I=y-T,k=S*I-(O-v*T-S*T-v*I),R=C-k,u=C-R,Bt[0]=C-(R+u)+(u-k),_=L+R,u=_-L,N=L-(_-u)+(R-u),R=N-O,u=N-R,Bt[1]=N-(R+u)+(u-O),h=_+R,u=h-_,Bt[2]=_-(h-u)+(R-u),Bt[3]=h;let E=ao(4,Bt),M=go*o;if(E>=M||-E>=M||(u=e-p,l=e-(p+u)+(u-r),u=n-y,f=n-(y+u)+(u-r),u=t-m,c=t-(m+u)+(u-s),u=i-x,a=i-(x+u)+(u-s),l===0&&c===0&&f===0&&a===0)||(M=po*o+co*Math.abs(E),E+=p*a+x*l-(m*f+y*c),E>=M||-E>=M))return E;L=l*x,g=tt*l,v=g-(g-l),S=l-v,g=tt*x,T=g-(g-x),I=x-T,C=S*I-(L-v*T-S*T-v*I),O=c*y,g=tt*c,v=g-(g-c),S=c-v,g=tt*y,T=g-(g-y),I=y-T,k=S*I-(O-v*T-S*T-v*I),R=C-k,u=C-R,rt[0]=C-(R+u)+(u-k),_=L+R,u=_-L,N=L-(_-u)+(R-u),R=N-O,u=N-R,rt[1]=N-(R+u)+(u-O),h=_+R,u=h-_,rt[2]=_-(h-u)+(R-u),rt[3]=h;const d=Ze(4,Bt,4,rt,Ni);L=p*a,g=tt*p,v=g-(g-p),S=p-v,g=tt*a,T=g-(g-a),I=a-T,C=S*I-(L-v*T-S*T-v*I),O=m*f,g=tt*m,v=g-(g-m),S=m-v,g=tt*f,T=g-(g-f),I=f-T,k=S*I-(O-v*T-S*T-v*I),R=C-k,u=C-R,rt[0]=C-(R+u)+(u-k),_=L+R,u=_-L,N=L-(_-u)+(R-u),R=N-O,u=N-R,rt[1]=N-(R+u)+(u-O),h=_+R,u=h-_,rt[2]=_-(h-u)+(R-u),rt[3]=h;const w=Ze(d,Ni,4,rt,Oi);L=l*a,g=tt*l,v=g-(g-l),S=l-v,g=tt*a,T=g-(g-a),I=a-T,C=S*I-(L-v*T-S*T-v*I),O=c*f,g=tt*c,v=g-(g-c),S=c-v,g=tt*f,T=g-(g-f),I=f-T,k=S*I-(O-v*T-S*T-v*I),R=C-k,u=C-R,rt[0]=C-(R+u)+(u-k),_=L+R,u=_-L,N=L-(_-u)+(R-u),R=N-O,u=N-R,rt[1]=N-(R+u)+(u-O),h=_+R,u=h-_,rt[2]=_-(h-u)+(R-u),rt[3]=h;const P=Ze(w,Oi,4,rt,Ci);return Ci[P-1]}function ae(e,t,n,i,r,s){const o=(t-s)*(n-r),l=(e-r)*(i-s),c=o-l,f=Math.abs(o+l);return Math.abs(c)>=ho*f?c:-yo(e,t,n,i,r,s,f)}const ki=Math.pow(2,-52),he=new Uint32Array(512);class $e{static from(t,n=Eo,i=So){const r=t.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const l=t[o];s[2*o]=n(l),s[2*o+1]=i(l)}return new $e(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:s}=this,o=t.length>>1;let l=1/0,c=1/0,f=-1/0,a=-1/0;for(let p=0;p<o;p++){const y=t[2*p],m=t[2*p+1];y<l&&(l=y),m<c&&(c=m),y>f&&(f=y),m>a&&(a=m),this._ids[p]=p}const u=(l+f)/2,g=(c+a)/2;let v,S,T;for(let p=0,y=1/0;p<o;p++){const m=Qe(u,g,t[2*p],t[2*p+1]);m<y&&(v=p,y=m)}const I=t[2*v],R=t[2*v+1];for(let p=0,y=1/0;p<o;p++){if(p===v)continue;const m=Qe(I,R,t[2*p],t[2*p+1]);m<y&&m>0&&(S=p,y=m)}let _=t[2*S],N=t[2*S+1],L=1/0;for(let p=0;p<o;p++){if(p===v||p===S)continue;const y=wo(I,R,_,N,t[2*p],t[2*p+1]);y<L&&(T=p,L=y)}let C=t[2*T],O=t[2*T+1];if(L===1/0){for(let m=0;m<o;m++)this._dists[m]=t[2*m]-t[0]||t[2*m+1]-t[1];Gt(this._ids,this._dists,0,o-1);const p=new Uint32Array(o);let y=0;for(let m=0,x=-1/0;m<o;m++){const E=this._ids[m],M=this._dists[E];M>x&&(p[y++]=E,x=M)}this.hull=p.subarray(0,y),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(ae(I,R,_,N,C,O)<0){const p=S,y=_,m=N;S=T,_=C,N=O,T=p,C=y,O=m}const k=xo(I,R,_,N,C,O);this._cx=k.x,this._cy=k.y;for(let p=0;p<o;p++)this._dists[p]=Qe(t[2*p],t[2*p+1],k.x,k.y);Gt(this._ids,this._dists,0,o-1),this._hullStart=v;let h=3;i[v]=n[T]=S,i[S]=n[v]=T,i[T]=n[S]=v,r[v]=0,r[S]=1,r[T]=2,s.fill(-1),s[this._hashKey(I,R)]=v,s[this._hashKey(_,N)]=S,s[this._hashKey(C,O)]=T,this.trianglesLen=0,this._addTriangle(v,S,T,-1,-1,-1);for(let p=0,y,m;p<this._ids.length;p++){const x=this._ids[p],E=t[2*x],M=t[2*x+1];if(p>0&&Math.abs(E-y)<=ki&&Math.abs(M-m)<=ki||(y=E,m=M,x===v||x===S||x===T))continue;let d=0;for(let $=0,B=this._hashKey(E,M);$<this._hashSize&&(d=s[(B+$)%this._hashSize],!(d!==-1&&d!==i[d]));$++);d=n[d];let w=d,P;for(;P=i[w],ae(E,M,t[2*w],t[2*w+1],t[2*P],t[2*P+1])>=0;)if(w=P,w===d){w=-1;break}if(w===-1)continue;let b=this._addTriangle(w,x,i[w],-1,-1,r[w]);r[x]=this._legalize(b+2),r[w]=b,h++;let A=i[w];for(;P=i[A],ae(E,M,t[2*A],t[2*A+1],t[2*P],t[2*P+1])<0;)b=this._addTriangle(A,x,P,r[x],-1,r[A]),r[x]=this._legalize(b+2),i[A]=A,h--,A=P;if(w===d)for(;P=n[w],ae(E,M,t[2*P],t[2*P+1],t[2*w],t[2*w+1])<0;)b=this._addTriangle(P,x,w,-1,r[w],r[P]),this._legalize(b+2),r[P]=b,i[w]=w,h--,w=P;this._hullStart=n[x]=w,i[w]=n[A]=x,i[x]=A,s[this._hashKey(E,M)]=x,s[this._hashKey(t[2*w],t[2*w+1])]=w}this.hull=new Uint32Array(h);for(let p=0,y=this._hullStart;p<h;p++)this.hull[p]=y,y=i[y];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(vo(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let s=0,o=0;for(;;){const l=i[t],c=t-t%3;if(o=c+(t+2)%3,l===-1){if(s===0)break;t=he[--s];continue}const f=l-l%3,a=c+(t+1)%3,u=f+(l+2)%3,g=n[o],v=n[t],S=n[a],T=n[u];if(mo(r[2*g],r[2*g+1],r[2*v],r[2*v+1],r[2*S],r[2*S+1],r[2*T],r[2*T+1])){n[t]=T,n[l]=g;const R=i[u];if(R===-1){let N=this._hullStart;do{if(this._hullTri[N]===u){this._hullTri[N]=t;break}N=this._hullPrev[N]}while(N!==this._hullStart)}this._link(t,R),this._link(l,i[o]),this._link(o,u);const _=f+(l+1)%3;s<he.length&&(he[s++]=_)}else{if(s===0)break;t=he[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,s,o){const l=this.trianglesLen;return this._triangles[l]=t,this._triangles[l+1]=n,this._triangles[l+2]=i,this._link(l,r),this._link(l+1,s),this._link(l+2,o),this.trianglesLen+=3,l}}function vo(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Qe(e,t,n,i){const r=e-n,s=t-i;return r*r+s*s}function mo(e,t,n,i,r,s,o,l){const c=e-o,f=t-l,a=n-o,u=i-l,g=r-o,v=s-l,S=c*c+f*f,T=a*a+u*u,I=g*g+v*v;return c*(u*I-T*v)-f*(a*I-T*g)+S*(a*v-u*g)<0}function wo(e,t,n,i,r,s){const o=n-e,l=i-t,c=r-e,f=s-t,a=o*o+l*l,u=c*c+f*f,g=.5/(o*f-l*c),v=(f*a-l*u)*g,S=(o*u-c*a)*g;return v*v+S*S}function xo(e,t,n,i,r,s){const o=n-e,l=i-t,c=r-e,f=s-t,a=o*o+l*l,u=c*c+f*f,g=.5/(o*f-l*c),v=e+(f*a-l*u)*g,S=t+(o*u-c*a)*g;return{x:v,y:S}}function Gt(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const s=e[r],o=t[s];let l=r-1;for(;l>=n&&t[e[l]]>o;)e[l+1]=e[l--];e[l+1]=s}else{const r=n+i>>1;let s=n+1,o=i;Ht(e,r,s),t[e[n]]>t[e[i]]&&Ht(e,n,i),t[e[s]]>t[e[i]]&&Ht(e,s,i),t[e[n]]>t[e[s]]&&Ht(e,n,s);const l=e[s],c=t[l];for(;;){do s++;while(t[e[s]]<c);do o--;while(t[e[o]]>c);if(o<s)break;Ht(e,s,o)}e[n+1]=e[o],e[o]=l,i-s+1>=o-n?(Gt(e,t,s,i),Gt(e,t,n,o-1)):(Gt(e,t,n,o-1),Gt(e,t,s,i))}}function Ht(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Eo(e){return e[0]}function So(e){return e[1]}const $i=1e-6;class Ct{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,s=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>$i||Math.abs(this._y1-s)>$i)&&(this._+="L"+r+","+s),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=s}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class Mn{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class _o{constructor(t,[n,i,r,s]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let s,o;const l=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let T=0,I=0,R=i.length,_,N;T<R;T+=3,I+=2){const L=i[T]*2,C=i[T+1]*2,O=i[T+2]*2,k=t[L],h=t[L+1],p=t[C],y=t[C+1],m=t[O],x=t[O+1],E=p-k,M=y-h,d=m-k,w=x-h,P=(E*w-M*d)*2;if(Math.abs(P)<1e-9){if(s===void 0){s=o=0;for(const A of n)s+=t[A*2],o+=t[A*2+1];s/=n.length,o/=n.length}const b=1e9*Math.sign((s-k)*w-(o-h)*d);_=(k+m)/2-b*w,N=(h+x)/2+b*d}else{const b=1/P,A=E*E+M*M,$=d*d+w*w;_=k+(w*A-M*$)*b,N=h+(E*$-d*A)*b}l[I]=_,l[I+1]=N}let c=n[n.length-1],f,a=c*4,u,g=t[2*c],v,S=t[2*c+1];r.fill(0);for(let T=0;T<n.length;++T)c=n[T],f=a,u=g,v=S,a=c*4,g=t[2*c],S=t[2*c+1],r[f+2]=r[a]=v-S,r[f+3]=r[a+1]=g-u}render(t){const n=t==null?t=new Ct:void 0,{delaunay:{halfedges:i,inedges:r,hull:s},circumcenters:o,vectors:l}=this;if(s.length<=1)return null;for(let a=0,u=i.length;a<u;++a){const g=i[a];if(g<a)continue;const v=Math.floor(a/3)*2,S=Math.floor(g/3)*2,T=o[v],I=o[v+1],R=o[S],_=o[S+1];this._renderSegment(T,I,R,_,t)}let c,f=s[s.length-1];for(let a=0;a<s.length;++a){c=f,f=s[a];const u=Math.floor(r[f]/3)*2,g=o[u],v=o[u+1],S=c*4,T=this._project(g,v,l[S+2],l[S+3]);T&&this._renderSegment(g,v,T[0],T[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Ct:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Ct:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new Mn;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,s){let o;const l=this._regioncode(t,n),c=this._regioncode(i,r);l===0&&c===0?(s.moveTo(t,n),s.lineTo(i,r)):(o=this._clipSegment(t,n,i,r,l,c))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){t:for(let s=0,o=n.length;s<o;s+=2)for(let l=0,c=r.length;l<c;l+=2)if(n[s]===r[l]&&n[s+1]===r[l+1]&&n[(s+2)%o]===r[(l+c-2)%c]&&n[(s+3)%o]===r[(l+c-1)%c]){yield i;break t}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:s}}=this,o=i[t];if(o===-1)return null;const l=[];let c=o;do{const f=Math.floor(c/3);if(l.push(n[f*2],n[f*2+1]),c=c%3===2?c-2:c+1,s[c]!==t)break;c=r[c]}while(c!==o&&c!==-1);return l}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,s,o,l=n[i-2],c=n[i-1],f,a=this._regioncode(l,c),u,g=0;for(let v=0;v<i;v+=2)if(s=l,o=c,l=n[v],c=n[v+1],f=a,a=this._regioncode(l,c),f===0&&a===0)u=g,g=0,r?r.push(l,c):r=[l,c];else{let S,T,I,R,_;if(f===0){if((S=this._clipSegment(s,o,l,c,f,a))===null)continue;[T,I,R,_]=S}else{if((S=this._clipSegment(l,c,s,o,a,f))===null)continue;[R,_,T,I]=S,u=g,g=this._edgecode(T,I),u&&g&&this._edge(t,u,g,r,r.length),r?r.push(T,I):r=[T,I]}u=g,g=this._edgecode(R,_),u&&g&&this._edge(t,u,g,r,r.length),r?r.push(R,_):r=[R,_]}if(r)u=g,g=this._edgecode(r[0],r[1]),u&&g&&this._edge(t,u,g,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,s,o){const l=s<o;for(l&&([t,n,i,r,s,o]=[i,r,t,n,o,s]);;){if(s===0&&o===0)return l?[i,r,t,n]:[t,n,i,r];if(s&o)return null;let c,f,a=s||o;a&8?(c=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):a&4?(c=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):a&2?(f=n+(r-n)*(this.xmax-t)/(i-t),c=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),c=this.xmin),s?(t=c,n=f,s=this._regioncode(t,n)):(i=c,r=f,o=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,s,o){let l=Array.from(n),c;if((c=this._project(l[0],l[1],i,r))&&l.unshift(c[0],c[1]),(c=this._project(l[l.length-2],l[l.length-1],s,o))&&l.push(c[0],c[1]),l=this._clipFinite(t,l))for(let f=0,a=l.length,u,g=this._edgecode(l[a-2],l[a-1]);f<a;f+=2)u=g,g=this._edgecode(l[f],l[f+1]),u&&g&&(f=this._edge(t,u,g,l,f),a=l.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(t,n,i,r,s){for(;n!==i;){let o,l;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,l=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,l=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,l=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,l=this.ymin;break}(r[s]!==o||r[s+1]!==l)&&this.contains(t,o,l)&&(r.splice(s,0,o,l),s+=2)}return s}_project(t,n,i,r){let s=1/0,o,l,c;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<s&&(c=this.ymin,l=t+(s=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<s&&(c=this.ymax,l=t+(s=o)*i)}if(i>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/i)<s&&(l=this.xmax,c=n+(s=o)*r)}else if(i<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/i)<s&&(l=this.xmin,c=n+(s=o)*r)}return[l,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}}const Mo=2*Math.PI,Ft=Math.pow;function Po(e){return e[0]}function To(e){return e[1]}function bo(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],s=2*t[i+1],o=2*t[i+2];if((n[o]-n[r])*(n[s+1]-n[r+1])-(n[s]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function Io(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Fn{static from(t,n=Po,i=To,r){return new Fn("length"in t?Ro(t,n,i,r):Float64Array.from(Ao(t,n,i,r)))}constructor(t){this._delaunator=new $e(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&bo(t)){this.collinear=Int32Array.from({length:n.length/2},(g,v)=>v).sort((g,v)=>n[2*g]-n[2*v]||n[2*g+1]-n[2*v+1]);const c=this.collinear[0],f=this.collinear[this.collinear.length-1],a=[n[2*c],n[2*c+1],n[2*f],n[2*f+1]],u=1e-8*Math.hypot(a[3]-a[1],a[2]-a[0]);for(let g=0,v=n.length/2;g<v;++g){const S=Io(n[2*g],n[2*g+1],u);n[2*g]=S[0],n[2*g+1]=S[1]}this._delaunator=new $e(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let c=0,f=i.length;c<f;++c){const a=s[c%3===2?c-2:c+1];(i[c]===-1||o[a]===-1)&&(o[a]=c)}for(let c=0,f=r.length;c<f;++c)l[r[c]]=c;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new _o(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:s,triangles:o,collinear:l}=this;if(l){const u=l.indexOf(t);u>0&&(yield l[u-1]),u<l.length-1&&(yield l[u+1]);return}const c=n[t];if(c===-1)return;let f=c,a=-1;do{if(yield a=o[f],f=f%3===2?f-2:f+1,o[f]!==t)return;if(f=s[f],f===-1){const u=i[(r[t]+1)%i.length];u!==a&&(yield u);return}}while(f!==c)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let s;for(;(s=this._step(i,t,n))>=0&&s!==i&&s!==r;)i=s;return s}_step(t,n,i){const{inedges:r,hull:s,_hullIndex:o,halfedges:l,triangles:c,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let a=t,u=Ft(n-f[t*2],2)+Ft(i-f[t*2+1],2);const g=r[t];let v=g;do{let S=c[v];const T=Ft(n-f[S*2],2)+Ft(i-f[S*2+1],2);if(T<u&&(u=T,a=S),v=v%3===2?v-2:v+1,c[v]!==t)break;if(v=l[v],v===-1){if(v=s[(o[t]+1)%s.length],v!==S&&Ft(n-f[v*2],2)+Ft(i-f[v*2+1],2)<u)return v;break}}while(v!==g);return a}render(t){const n=t==null?t=new Ct:void 0,{points:i,halfedges:r,triangles:s}=this;for(let o=0,l=r.length;o<l;++o){const c=r[o];if(c<o)continue;const f=s[o]*2,a=s[c]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[a],i[a+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Ct:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const l=r[s],c=r[s+1];t.moveTo(l+n,c),t.arc(l,c,n,0,Mo)}return i&&i.value()}renderHull(t){const n=t==null?t=new Ct:void 0,{hull:i,points:r}=this,s=i[0]*2,o=i.length;t.moveTo(r[s],r[s+1]);for(let l=1;l<o;++l){const c=2*i[l];t.lineTo(r[c],r[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Mn;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Ct:void 0,{points:r,triangles:s}=this,o=s[t*=3]*2,l=s[t+1]*2,c=s[t+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[l],r[l+1]),n.lineTo(r[c],r[c+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Mn;return this.renderTriangle(t,n),n.value()}}function Ro(e,t,n,i){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const l=e[o];s[o*2]=t.call(i,l,o,e),s[o*2+1]=n.call(i,l,o,e)}return s}function*Ao(e,t,n,i){let r=0;for(const s of e)yield t.call(i,s,r,e),yield n.call(i,s,r,e),++r}const Gn=Math.PI,Bi=Gn/2,Fi=180/Gn,Gi=Gn/180,Lo=Math.atan2,qi=Math.cos,No=Math.max,Oo=Math.min,zi=Math.sin,Co=Math.sign||function(e){return e>0?1:e<0?-1:0},dr=Math.sqrt;function ko(e){return e>1?Bi:e<-1?-Bi:Math.asin(e)}function yr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ht(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Be(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]}function Fe(e){var t=dr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]}function qn(e){return[Lo(e[1],e[0])*Fi,ko(No(-1,Oo(1,e[2])))*Fi]}function Pt(e){const t=e[0]*Gi,n=e[1]*Gi,i=qi(n);return[i*qi(t),i*zi(t),zi(n)]}function zn(e){return e=e.map(t=>Pt(t)),yr(e[0],ht(e[2],e[1]))}function $o(e){const t=Fo(e),n=qo(t),i=Go(n,e),r=Do(n,e.length),s=Bo(r,e),o=zo(n,e),{polygons:l,centers:c}=Uo(o,n,e),f=Xo(l),a=Vo(n,e),u=Ko(i,n);return{delaunay:t,edges:i,triangles:n,centers:c,neighbors:r,polygons:l,mesh:f,hull:a,urquhart:u,find:s}}function Bo(e,t){function n(i,r){let s=i[0]-r[0],o=i[1]-r[1],l=i[2]-r[2];return s*s+o*o+l*l}return function(r,s,o){o===void 0&&(o=0);let l,c,f=o;const a=Pt([r,s]);do l=o,o=null,c=n(a,Pt(t[l])),e[l].forEach(u=>{let g=n(a,Pt(t[u]));if(g<c){c=g,o=u,f=u;return}});while(o!==null);return f}}function Fo(e){if(e.length<2)return{};let t=0;for(;isNaN(e[t][0]+e[t][1])&&t++<e.length;);const n=or(e[t]),i=eo().translate([0,0]).scale(1).rotate(n.invert([180,0]));e=e.map(i);const r=[];let s=1;for(let u=0,g=e.length;u<g;u++){let v=e[u][0]**2+e[u][1]**2;!isFinite(v)||v>1e32?r.push(u):v>s&&(s=v)}const o=1e6*dr(s);r.forEach(u=>e[u]=[o,0]),e.push([0,o]),e.push([-o,0]),e.push([0,-o]);const l=Fn.from(e);l.projection=i;const{triangles:c,halfedges:f,inedges:a}=l;for(let u=0,g=f.length;u<g;u++)if(f[u]<0){const v=u%3==2?u-2:u+1,S=u%3==0?u+2:u-1,T=f[v],I=f[S];f[T]=I,f[I]=T,f[v]=f[S]=-1,c[u]=c[v]=c[S]=t,a[c[T]]=T%3==0?T+2:T-1,a[c[I]]=I%3==0?I+2:I-1,u+=2-u%3}else c[u]>e.length-3-1&&(c[u]=t);return l}function Go(e,t){const n=new Set;return t.length===2?[[0,1]]:(e.forEach(i=>{if(i[0]!==i[1]&&!(zn(i.map(r=>t[r]))<0))for(let r=0,s;r<3;r++)s=(r+1)%3,n.add(tr([i[r],i[s]]).join("-"))}),Array.from(n,i=>i.split("-").map(Number)))}function qo(e){const{triangles:t}=e;if(!t)return[];const n=[];for(let i=0,r=t.length/3;i<r;i++){const s=t[3*i],o=t[3*i+1],l=t[3*i+2];s!==o&&o!==l&&n.push([s,l,o])}return n}function zo(e,t){return e.map(n=>{const i=n.map(s=>t[s]).map(Pt),r=Be(Be(ht(i[1],i[0]),ht(i[2],i[1])),ht(i[0],i[2]));return qn(Fe(r))})}function Do(e,t){const n=[];return e.forEach(i=>{for(let r=0;r<3;r++){const s=i[r],o=i[(r+1)%3];n[s]=n[s]||[],n[s].push(o)}}),e.length===0&&(t===2?(n[0]=[1],n[1]=[0]):t===1&&(n[0]=[])),n}function Uo(e,t,n){const i=[],r=e.slice();if(t.length===0){if(n.length<2)return{polygons:i,centers:r};if(n.length===2){const l=Pt(n[0]),c=Pt(n[1]),f=Fe(Be(l,c)),a=Fe(ht(l,c)),u=ht(f,a),g=[f,ht(f,u),ht(ht(f,u),u),ht(ht(ht(f,u),u),u)].map(qn).map(o);return i.push(g),i.push(g.slice().reverse()),{polygons:i,centers:r}}}t.forEach((l,c)=>{for(let f=0;f<3;f++){const a=l[f],u=l[(f+1)%3],g=l[(f+2)%3];i[a]=i[a]||[],i[a].push([u,g,c,[a,u,g]])}});const s=i.map(l=>{const c=[l[0][2]];let f=l[0][1];for(let a=1;a<l.length;a++)for(let u=0;u<l.length;u++)if(l[u][0]==f){f=l[u][1],c.push(l[u][2]);break}if(c.length>2)return c;if(c.length==2){const a=Di(n[l[0][3][0]],n[l[0][3][1]],r[c[0]]),u=Di(n[l[0][3][2]],n[l[0][3][0]],r[c[0]]),g=o(a),v=o(u);return[c[0],v,c[1],g]}});function o(l){let c=-1;return r.slice(t.length,1/0).forEach((f,a)=>{f[0]===l[0]&&f[1]===l[1]&&(c=a+t.length)}),c<0&&(c=r.length,r.push(l)),c}return{polygons:s,centers:r}}function Di(e,t,n){e=Pt(e),t=Pt(t),n=Pt(n);const i=Co(yr(ht(t,e),n));return qn(Fe(Be(e,t)).map(r=>i*r))}function Xo(e){const t=[];return e.forEach(n=>{if(!n)return;let i=n[n.length-1];for(let r of n)r>i&&t.push([i,r]),i=r}),t}function Ko(e,t){return function(n){const i=new Map,r=new Map;return e.forEach((s,o)=>{const l=s.join("-");i.set(l,n[o]),r.set(l,!0)}),t.forEach(s=>{let o=0,l=-1;for(let c=0;c<3;c++){let f=tr([s[c],s[(c+1)%3]]).join("-");i.get(f)>o&&(o=i.get(f),l=f)}r.set(l,!1)}),e.map(s=>r.get(s.join("-")))}}function Vo(e,t){const n=new Set,i=[];e.map(l=>{if(!(zn(l.map(c=>t[c>t.length?0:c]))>1e-12))for(let c=0;c<3;c++){let f=[l[c],l[(c+1)%3]],a=`${f[0]}-${f[1]}`;n.has(a)?n.delete(a):n.add(`${f[1]}-${f[0]}`)}});const r=new Map;let s;if(n.forEach(l=>{l=l.split("-").map(Number),r.set(l[0],l[1]),s=l[0]}),s===void 0)return i;let o=s;do{i.push(o);let l=r.get(o);r.set(o,-1),o=l}while(o>-1&&o!==s);return i}function Yo(e){const t=function(n){if(t.delaunay=null,t._data=n,typeof t._data=="object"&&t._data.type==="FeatureCollection"&&(t._data=t._data.features),typeof t._data=="object"){const i=t._data.map(r=>[t._vx(r),t._vy(r),r]).filter(r=>isFinite(r[0]+r[1]));t.points=i.map(r=>[r[0],r[1]]),t.valid=i.map(r=>r[2]),t.delaunay=$o(t.points)}return t};return t._vx=function(n){if(typeof n=="object"&&"type"in n)return ai(n)[0];if(0 in n)return n[0]},t._vy=function(n){if(typeof n=="object"&&"type"in n)return ai(n)[1];if(1 in n)return n[1]},t.x=function(n){return n?(t._vx=n,t):t._vx},t.y=function(n){return n?(t._vy=n,t):t._vy},t.polygons=function(n){if(n!==void 0&&t(n),!t.delaunay)return!1;const i={type:"FeatureCollection",features:[]};return t.valid.length===0||(t.delaunay.polygons.forEach((r,s)=>i.features.push({type:"Feature",geometry:r?{type:"Polygon",coordinates:[[...r,r[0]].map(o=>t.delaunay.centers[o])]}:null,properties:{site:t.valid[s],sitecoordinates:t.points[s],neighbours:t.delaunay.neighbors[s]}})),t.valid.length===1&&i.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:t.valid[0],sitecoordinates:t.points[0],neighbours:[]}})),i},t.triangles=function(n){return n!==void 0&&t(n),t.delaunay?{type:"FeatureCollection",features:t.delaunay.triangles.map((i,r)=>(i=i.map(s=>t.points[s]),i.center=t.delaunay.centers[r],i)).filter(i=>zn(i)>0).map(i=>({type:"Feature",properties:{circumcenter:i.center},geometry:{type:"Polygon",coordinates:[[...i,i[0]]]}}))}:!1},t.links=function(n){if(n!==void 0&&t(n),!t.delaunay)return!1;const i=t.delaunay.edges.map(s=>mi(t.points[s[0]],t.points[s[1]])),r=t.delaunay.urquhart(i);return{type:"FeatureCollection",features:t.delaunay.edges.map((s,o)=>({type:"Feature",properties:{source:t.valid[s[0]],target:t.valid[s[1]],length:i[o],urquhart:!!r[o]},geometry:{type:"LineString",coordinates:[t.points[s[0]],t.points[s[1]]]}}))}},t.mesh=function(n){return n!==void 0&&t(n),t.delaunay?{type:"MultiLineString",coordinates:t.delaunay.edges.map(i=>[t.points[i[0]],t.points[i[1]]])}:!1},t.cellMesh=function(n){if(n!==void 0&&t(n),!t.delaunay)return!1;const{centers:i,polygons:r}=t.delaunay,s=[];for(const o of r)if(o)for(let l=o.length,c=o[l-1],f=o[0],a=0;a<l;c=f,f=o[++a])f>c&&s.push([i[c],i[f]]);return{type:"MultiLineString",coordinates:s}},t._found=void 0,t.find=function(n,i,r){if(t._found=t.delaunay.find(n,i,t._found),!r||mi([n,i],t.points[t._found])<r)return t._found},t.hull=function(n){n!==void 0&&t(n);const i=t.delaunay.hull,r=t.points;return i.length===0?null:{type:"Polygon",coordinates:[[...i.map(s=>r[s]),r[i[0]]]]}},e?t(e):t}const Ho=ss(Xi([180,90])),el=e=>{const t=Yo()(e).polygons(),n=ro(fo(t),Js().translate([0,0]).precision(.005)),i=Ho.geometry.coordinates[0]/480.5;return Pn(n,r=>{r[0]=r[0]*i,r[1]=r[1]*-i}),os(n)},jo=e=>{if(e.features.length===1)return e.features[0];const t=Ji(e);if(t)return t;throw new Error("No features")},nl=e=>{e=e.features?jo(e):e;const t=[];if(e.geometry.type==="Polygon"&&(e=xe([e.geometry.coordinates])),e.geometry.type==="MultiPolygon")for(const n of e.geometry.coordinates)n.length>1&&t.push(...n.slice(1));return Ji(_r([ns(e),xe(t.map(n=>[n]))]))},il=e=>`${Math.abs(e[1])}Â°${e[1]>0?"N":"S"}, ${Math.abs(e[0])}Â°${e[0]>0?"E":"W"}`,rl=e=>{const t=e.filter(f=>f.properties.name!==void 0||f.properties["name:en"]!==void 0||f.properties.network!==void 0),n=t.length,i=Array.from({length:n},(f,a)=>a),r=f=>(i[f]!==f&&(i[f]=r(i[f])),i[f]),s=(f,a)=>{const u=r(f),g=r(a);u!==g&&(i[g]=u)},o=["name","name:en","network"],l={};for(let f=0;f<n;f++){const a=t[f];for(const u of o){const g=a.properties[u];if(g!==void 0){const v=`${u}:${g}`;l[v]===void 0?l[v]=f:s(f,l[v])}}}const c={};for(let f=0;f<n;f++){const a=r(f);c[a]||(c[a]=[]),c[a].push(t[f])}return Object.values(c)},Je=(e,t)=>{const n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)},sl=(e,t=.01)=>{if(e.length<=1)return e.length===1?[e[0]]:[];const n=[...e],i=[];let r=[];const s=n.shift();for(r.push(...s);n.length>0;){const o=r[r.length-1];let l=-1,c=1/0,f=!1;n.forEach((u,g)=>{const v=Je(o,u[0]);v<c&&(c=v,l=g,f=!1);const S=Je(o,u[u.length-1]);S<c&&(c=S,l=g,f=!0)});let a=n.splice(l,1)[0];if(f&&(a=a.slice().reverse()),c>t)i.push(r),r=[...a];else{const u=a[0];Je(o,u)<1e-4?r.push(...a.slice(1)):r.push(...a)}}return r.length>0&&i.push(r),i};export{Qo as a,Jo as b,Ji as c,Zo as d,Jr as e,rl as f,el as g,nl as h,Zr as i,sl as j,il as l,ns as m,tl as s,jo as u};
