import{j as e,B as f}from"./index.ThHS-4Rn.js";import{y as c}from"./_astro-entry_react-toastify.BqZZ0Rhh.js";import{f as u,M as g,g as m}from"./sidebar-l.CEyj2Wmt.js";import{I as h}from"./iconBase.CiDQrpSB.js";import{L as b,S as x}from"./checkbox.o88Tevvy.js";import{i as p}from"./context.D_LBmcSq.js";const C=a=>{const n=/(-?\d+[.,]\d+)\s*,\s*(-?\d+[.,]\d+)/,i=/(\d+)°\s*(\d+)['′]?\s*(?:(\d+(?:\.\d+)?)["″]?\s*)?([NS])[,\s]+(\d+)°\s*(\d+)['′]?\s*(?:(\d+(?:\.\d+)?)["″]?\s*)?([EW])/i,d=/(\d+[.,]\d+)°\s*([NS])\s*,\s*(\d+[.,]\d+)°\s*([EW])/i,l=a.match(n);if(l)return{lat:parseFloat(l[1].replace(",",".")),lng:parseFloat(l[2].replace(",","."))};const s=a.match(i);if(s){let r=parseInt(s[1])+parseInt(s[2])/60+(parseFloat(s[3])||0)/3600,t=parseInt(s[5])+parseInt(s[6])/60+(parseFloat(s[7])||0)/3600;return s[4].toUpperCase()==="S"&&(r=-r),s[8].toUpperCase()==="W"&&(t=-t),{lat:r,lng:t}}const o=a.match(d);if(o){let r=parseFloat(o[1].replace(",",".")),t=parseFloat(o[3].replace(",","."));return o[2].toUpperCase()==="S"&&(r=-r),o[4].toUpperCase()==="W"&&(t=-t),{lat:r,lng:t}}return{lat:null,lng:null}},S=({latitude:a,longitude:n,onChange:i,latLabel:d="Latitude",lngLabel:l="Longitude",children:s,disabled:o})=>e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:g,children:[e.jsx(b,{className:"leading-5",children:d}),e.jsx(h,{type:"number",value:Math.abs(a),min:0,max:90,onChange:r=>{isNaN(parseFloat(r.target.value))||i(parseFloat(r.target.value)*(a!==0?Math.sign(a):-1),null)},disabled:o}),e.jsx(f,{variant:"outline",onClick:()=>i(-a,null),disabled:o,children:a>0?"N":"S"})]}),e.jsxs(u,{className:g,children:[e.jsx(b,{className:"leading-5",children:l}),e.jsx(h,{type:"number",value:Math.abs(n),min:0,max:180,onChange:r=>{isNaN(parseFloat(r.target.value))||i(null,parseFloat(r.target.value)*(n!==0?Math.sign(n):-1))},disabled:o}),e.jsx(f,{variant:"outline",onClick:()=>i(null,-n),disabled:o,children:n>0?"E":"W"})]}),e.jsxs(u,{className:"flex gap-2",children:[e.jsx(m,{className:"bg-blue-600 p-2 rounded-md font-semibold font-poppins transition-colors duration-500 flex justify-center",onClick:()=>{if(!navigator||!navigator.geolocation)return alert("Geolocation not supported");p.set(!0),c.promise(new Promise((r,t)=>{navigator.geolocation.getCurrentPosition(r,t,{maximumAge:0,enableHighAccuracy:!0})}).then(r=>{i(r.coords.latitude,r.coords.longitude)}).finally(()=>{p.set(!1)}),{pending:"Fetching location",success:"Location fetched",error:"Could not fetch location"},{autoClose:500})},disabled:o,children:"Current"}),e.jsx(m,{className:"bg-blue-600 p-2 rounded-md font-semibold font-poppins transition-colors duration-500 flex justify-center",onClick:()=>{if(!navigator||!navigator.clipboard){c.error("Clipboard API not supported in your browser");return}c.promise(navigator.clipboard.writeText(`${Math.abs(a)}°${a>0?"N":"S"}, ${Math.abs(n)}°${n>0?"E":"W"}`),{pending:"Writing to clipboard...",success:"Coordinates copied!",error:"An error occurred while copying"},{autoClose:1e3})},disabled:o,children:"Copy"}),e.jsx(m,{className:"bg-blue-600 p-2 rounded-md font-semibold font-poppins transition-colors duration-500 flex justify-center",onClick:()=>{if(!navigator||!navigator.clipboard){c.error("Clipboard API not supported in your browser");return}p.set(!0),c.promise(navigator.clipboard.readText().then(r=>{const t=C(r);if(t.lat!==null&&t.lng!==null){i(t.lat,t.lng);return}throw new Error("Could not find coordinates in clipboard content")}).finally(()=>{p.set(!1)}),{pending:"Reading from clipboard",success:"Coordinates set from clipboard",error:"No valid coordinates found in clipboard"},{autoClose:1e3})},disabled:o,children:"Paste"})]}),s]}),I=({unit:a,onChange:n,disabled:i})=>e.jsx(x,{trigger:"Unit",options:{miles:"Miles",kilometers:"Kilometers",meters:"Meters"},disabled:i,value:a,onValueChange:n});export{S as L,I as U};
