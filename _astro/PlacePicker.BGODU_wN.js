import{c as N,u as m,j as e,B as S,a as y}from"./index.Eoy0PIGW.js";import{r as t}from"./index.DUAV1Q2A.js";import{m as u,p as d,g as P,d as h,c as w,q as E,e as G,C as L}from"./context.BZhA5a5S.js";import{P as O,a as v,b as T,C as V,c as k,d as D,e as I,f as _,g as $}from"./popover.DwOXX8NX.js";import"./clsx.B-dksMZM.js";import"./index.w2VhVQe9.js";import"./_astro-entry_react-toastify.BqZZ0Rhh.js";import"./dialog.BhZgoQuL.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],J=N("ChevronsUpDown",F);function U(a,o=500){const[r,n]=t.useState(a);return t.useEffect(()=>{const c=setTimeout(()=>n(a),o);return()=>{clearTimeout(c)}},[a,o]),r}const M=({className:a=""})=>{const o=m(u),r=m(d),[n,c]=t.useState(!1),[x,f]=t.useState(""),i=U(x),[g,l]=t.useState([]),[j,p]=t.useState(!1),[C,b]=t.useState(!1);return t.useEffect(()=>{if(i===""){l([]);return}else p(!0),l([]),P(i,"en").then(s=>{l(s),p(!1)}).catch(s=>{console.log(s),b(!0),p(!1)})},[i]),e.jsxs(O,{open:n,onOpenChange:c,children:[e.jsx(v,{asChild:!0,children:e.jsxs(S,{variant:"outline",role:"combobox","aria-expanded":n,className:y("w-[300px] justify-between light text-slate-700",a),children:[r?"Polygon selected":o&&o.properties&&o.properties.name?h(o):"Hiding bounds",e.jsx(J,{className:"opacity-50"})]})}),e.jsx(T,{className:"w-[300px] p-0 light",children:e.jsxs(V,{shouldFilter:!1,children:[e.jsx(k,{placeholder:"Search place...",onKeyUp:s=>{f(s.currentTarget.value)}}),e.jsxs(D,{children:[e.jsx(I,{children:j?e.jsx(e.Fragment,{children:"Loading..."}):C?e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"https://github.com/komoot/photon",className:"text-blue-500",children:"Photon"})," ","is down. Please draw a polygon instead at the bottom left of the map."]}):"No locations found."}),e.jsx(_,{children:g.map(s=>e.jsx($,{onSelect:()=>{u.set(s),w.set(null),d.set(null),E.set([]),G(L.ZONE_CACHE)},className:"cursor-pointer",children:h(s)},`${s.properties.osm_id}${s.properties.name}`))})]})]})})]})};export{M as PlacePicker};
